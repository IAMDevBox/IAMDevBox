<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Configuring SAML Login with Spring Security | IAMDevBox</title>
<meta name="keywords" content="Spring Security, SAML, SSO, Authentication, Identity Provider, Service Provider">
<meta name="author" content="IAMDevBox">
<link rel="canonical" href="https://www.iamdevbox.com/posts/configuring-saml-login-with-spring-security/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.iamdevbox.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.iamdevbox.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.iamdevbox.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.iamdevbox.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.iamdevbox.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.iamdevbox.com/posts/configuring-saml-login-with-spring-security/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  <link rel="stylesheet" href="/css/custom.css">

<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<meta property="og:url" content="https://www.iamdevbox.com/posts/configuring-saml-login-with-spring-security/">
  <meta property="og:site_name" content="IAMDevBox">
  <meta property="og:title" content="Configuring SAML Login with Spring Security">
  <meta property="og:description" content="Implementing SAML-based Single Sign-On (SSO) with Spring Security allows applications to delegate authentication to external Identity Providers (IdPs) like Okta, ADFS, or Azure AD. This guide explains how to configure Spring Security’s SAML Extension, set up local and remote metadata, and map user attributes for seamless integration.
1. Configuring Spring Security SAML Extension Prerequisites Java 8&#43; Spring Boot 2.x/3.x spring-security-saml2-service-provider dependency Step 1: Add Dependencies Include the following in your pom.xml (Maven) or build.gradle (Gradle):">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:modified_time" content="2025-05-07T09:34:58-04:00">
    <meta property="article:tag" content="Spring Security">
    <meta property="article:tag" content="SAML">
    <meta property="article:tag" content="SSO">
    <meta property="article:tag" content="Authentication">
    <meta property="article:tag" content="Identity Provider">
    <meta property="article:tag" content="Service Provider">
      <meta property="og:image" content="https://www.iamdevbox.com/static/IAMDevBox.com.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.iamdevbox.com/static/IAMDevBox.com.png">
<meta name="twitter:title" content="Configuring SAML Login with Spring Security">
<meta name="twitter:description" content="Implementing SAML-based Single Sign-On (SSO) with Spring Security allows applications to delegate authentication to external Identity Providers (IdPs) like Okta, ADFS, or Azure AD. This guide explains how to configure Spring Security&rsquo;s SAML Extension, set up local and remote metadata, and map user attributes for seamless integration.

1. Configuring Spring Security SAML Extension
Prerequisites

Java 8&#43;
Spring Boot 2.x/3.x
spring-security-saml2-service-provider dependency

Step 1: Add Dependencies
Include the following in your pom.xml (Maven) or build.gradle (Gradle):">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "All posts",
      "item": "https://www.iamdevbox.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Configuring SAML Login with Spring Security",
      "item": "https://www.iamdevbox.com/posts/configuring-saml-login-with-spring-security/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Configuring SAML Login with Spring Security",
  "name": "Configuring SAML Login with Spring Security",
  "description": "Implementing SAML-based Single Sign-On (SSO) with Spring Security allows applications to delegate authentication to external Identity Providers (IdPs) like Okta, ADFS, or Azure AD. This guide explains how to configure Spring Security\u0026rsquo;s SAML Extension, set up local and remote metadata, and map user attributes for seamless integration.\n1. Configuring Spring Security SAML Extension Prerequisites Java 8+ Spring Boot 2.x/3.x spring-security-saml2-service-provider dependency Step 1: Add Dependencies Include the following in your pom.xml (Maven) or build.gradle (Gradle):\n",
  "keywords": [
    "Spring Security", "SAML", "SSO", "Authentication", "Identity Provider", "Service Provider"
  ],
  "articleBody": "Implementing SAML-based Single Sign-On (SSO) with Spring Security allows applications to delegate authentication to external Identity Providers (IdPs) like Okta, ADFS, or Azure AD. This guide explains how to configure Spring Security’s SAML Extension, set up local and remote metadata, and map user attributes for seamless integration.\n1. Configuring Spring Security SAML Extension Prerequisites Java 8+ Spring Boot 2.x/3.x spring-security-saml2-service-provider dependency Step 1: Add Dependencies Include the following in your pom.xml (Maven) or build.gradle (Gradle):\nMaven:\norg.springframework.security spring-security-saml2-service-provider 5.7.0 Gradle:\nimplementation 'org.springframework.security:spring-security-saml2-service-provider:5.7.0' Step 2: Configure SAML in application.yml Define the SAML properties in your configuration file:\nspring: security: saml2: relyingparty: registration: idp-name: identityprovider: entity-id: urn:example:idp singlesignon.url: https://idp.example.com/saml2/sso verification.credentials: - certificate-location: classpath:idp-certificate.pem Step 3: Enable SAML in Security Configuration Extend WebSecurityConfigurerAdapter (Spring Boot 2.x) or use SecurityFilterChain (Spring Boot 3.x):\nSpring Boot 3.x Example:\n@Configuration @EnableWebSecurity public class SecurityConfig { @Bean SecurityFilterChain samlFilterChain(HttpSecurity http) throws Exception { http .authorizeHttpRequests(auth -\u003e auth .anyRequest().authenticated() ) .saml2Login(saml2 -\u003e saml2 .relyingParty(rp -\u003e rp .registration(registration -\u003e registration .entityId(\"urn:example:sp\") .assertingParty(party -\u003e party .entityId(\"urn:example:idp\") .singleSignOnServiceLocation(\"https://idp.example.com/saml2/sso\") .verificationCredentials(c -\u003e c .certificateLocation(\"classpath:idp-certificate.pem\") ) ) ) ) ); return http.build(); } } 2. Local and Remote Metadata Setup Local Metadata (SP Metadata) Spring Security can generate SP metadata dynamically or use a static file.\nGenerate Dynamically:\nAccess /saml2/service-provider-metadata/{registrationId} (e.g., /saml2/service-provider-metadata/idp-name).\nStatic Metadata File:\nCreate an XML file (e.g., sp-metadata.xml) with your SP details. Configure it in application.yml: spring: security: saml2: relyingparty: registration: idp-name: serviceprovider: entity-id: urn:example:sp metadata-location: classpath:sp-metadata.xml Remote Metadata (IdP Metadata) Provide the IdP’s metadata URL or file:\nVia URL:\nspring: security: saml2: relyingparty: registration: idp-name: identityprovider: metadata-uri: https://idp.example.com/metadata.xml Via File:\nmetadata-location: classpath:idp-metadata.xml 3. User Attribute Mapping (AttributeMapping) SAML assertions include user attributes (e.g., email, name). Map these to Spring Security’s Principal:\nDefault Attribute Mapping Spring Security automatically maps:\nhttp://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress → Principal.getName() http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname → Principal.getAttribute(\"given_name\") Custom Mapping Override defaults in SecurityConfig:\n.saml2Login(saml2 -\u003e saml2 .relyingParty(...) .userDetailsService(userDetailsService()) .attributeMapping(attrs -\u003e attrs .name(\"email\") // Maps NameID or specified attribute to Principal .samlAttribute(\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress\") ) ) Example: Extract Roles from SAML\n.saml2Login(saml2 -\u003e saml2 .attributeMapping(attrs -\u003e attrs .roles(\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\") ) ) 4. Full Flow Example with Metadata User Visits /login:\nRedirects to IdP’s SSO URL (https://idp.example.com/saml2/sso). IdP Authenticates User:\nReturns a SAML response to /saml2/acs (Assertion Consumer Service). Spring Security Validates Assertion:\nVerifies the signature using the IdP’s certificate. Maps attributes to Principal. User Granted Access:\nAuthenticated session established. Conclusion Spring Security’s SAML extension simplifies integration with SAML-based IdPs. Key steps include:\nConfiguring dependencies and properties. Setting up SP/IdP metadata (local or remote). Customizing attribute mapping for user details. For advanced scenarios, refer to the Spring Security SAML Documentation.\n",
  "wordCount" : "424",
  "inLanguage": "en",
  "image": "https://www.iamdevbox.com/static/IAMDevBox.com.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "2025-05-07T09:34:58-04:00",
  "author":{
    "@type": "Person",
    "name": "IAMDevBox"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.iamdevbox.com/posts/configuring-saml-login-with-spring-security/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "IAMDevBox",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.iamdevbox.com/favicon.ico"
    }
  }
}
</script><meta name="description" content="Configuring SAML Login with Spring Security - IAMDevBox"><script>
    window.addEventListener("DOMContentLoaded", async () => {
        if (document.querySelector('.mermaid')) {
        const mermaid = await import('https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs');
        mermaid.default.initialize({ startOnLoad: true, theme: "default" });
        }
    });
    </script>


    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6QCH29975"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B6QCH29975');
    </script>
    
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.iamdevbox.com/" accesskey="h" title="IAMDevBox (Alt + H)">IAMDevBox</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.iamdevbox.com/posts/" title="Read articles and updates">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/tools/" title="Explore developer tools">
                    <span>🧰Tools</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/search/" title="Search this site">
                    <span>🔍</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.iamdevbox.com/">Home</a>&nbsp;»&nbsp;<a href="https://www.iamdevbox.com/posts/">All posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Configuring SAML Login with Spring Security
    </h1>
    <div class="post-meta">2 min&nbsp;·&nbsp;424 words&nbsp;·&nbsp;IAMDevBox

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-configuring-spring-security-saml-extension" aria-label="1. Configuring Spring Security SAML Extension">1. Configuring Spring Security SAML Extension</a><ul>
                        
                <li>
                    <a href="#prerequisites" aria-label="Prerequisites">Prerequisites</a></li>
                <li>
                    <a href="#step-1-add-dependencies" aria-label="Step 1: Add Dependencies">Step 1: Add Dependencies</a></li>
                <li>
                    <a href="#step-2-configure-saml-in" aria-label="Step 2: Configure SAML in application.yml">Step 2: Configure SAML in application.yml</a></li>
                <li>
                    <a href="#step-3-enable-saml-in-security-configuration" aria-label="Step 3: Enable SAML in Security Configuration">Step 3: Enable SAML in Security Configuration</a></li></ul>
                </li>
                <li>
                    <a href="#2-local-and-remote-metadata-setup" aria-label="2. Local and Remote Metadata Setup">2. Local and Remote Metadata Setup</a><ul>
                        
                <li>
                    <a href="#local-metadata-sp-metadata" aria-label="Local Metadata (SP Metadata)">Local Metadata (SP Metadata)</a></li>
                <li>
                    <a href="#remote-metadata-idp-metadata" aria-label="Remote Metadata (IdP Metadata)">Remote Metadata (IdP Metadata)</a></li></ul>
                </li>
                <li>
                    <a href="#3-user-attribute-mapping-attributemapping" aria-label="3. User Attribute Mapping (AttributeMapping)">3. User Attribute Mapping (AttributeMapping)</a><ul>
                        
                <li>
                    <a href="#default-attribute-mapping" aria-label="Default Attribute Mapping">Default Attribute Mapping</a></li>
                <li>
                    <a href="#custom-mapping" aria-label="Custom Mapping">Custom Mapping</a></li></ul>
                </li>
                <li>
                    <a href="#4-full-flow-example-with-metadata" aria-label="4. Full Flow Example with Metadata">4. Full Flow Example with Metadata</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Implementing SAML-based Single Sign-On (SSO) with Spring Security allows applications to delegate authentication to external Identity Providers (IdPs) like Okta, ADFS, or Azure AD. This guide explains how to configure Spring Security&rsquo;s SAML Extension, set up local and remote metadata, and map user attributes for seamless integration.</p>
<hr>
<h3 id="1-configuring-spring-security-saml-extension"><strong>1. Configuring Spring Security SAML Extension</strong><a hidden class="anchor" aria-hidden="true" href="#1-configuring-spring-security-saml-extension">#</a></h3>
<h4 id="prerequisites"><strong>Prerequisites</strong><a hidden class="anchor" aria-hidden="true" href="#prerequisites">#</a></h4>
<ul>
<li>Java 8+</li>
<li>Spring Boot 2.x/3.x</li>
<li><code>spring-security-saml2-service-provider</code> dependency</li>
</ul>
<h4 id="step-1-add-dependencies"><strong>Step 1: Add Dependencies</strong><a hidden class="anchor" aria-hidden="true" href="#step-1-add-dependencies">#</a></h4>
<p>Include the following in your <code>pom.xml</code> (Maven) or <code>build.gradle</code> (Gradle):</p>
<p><strong>Maven:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.security<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>spring-security-saml2-service-provider<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;version&gt;</span>5.7.0<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p><strong>Gradle:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gradle" data-lang="gradle"><span style="display:flex;"><span>implementation <span style="color:#e6db74">&#39;org.springframework.security:spring-security-saml2-service-provider:5.7.0&#39;</span>
</span></span></code></pre></div><h4 id="step-2-configure-saml-in"><strong>Step 2: Configure SAML in <code>application.yml</code></strong><a hidden class="anchor" aria-hidden="true" href="#step-2-configure-saml-in">#</a></h4>
<p>Define the SAML properties in your configuration file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">security</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">saml2</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">relyingparty</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">registration</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">idp-name</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">identityprovider</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">entity-id</span>: <span style="color:#ae81ff">urn:example:idp</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">singlesignon.url</span>: <span style="color:#ae81ff">https://idp.example.com/saml2/sso</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">verification.credentials</span>:
</span></span><span style="display:flex;"><span>                - <span style="color:#f92672">certificate-location</span>: <span style="color:#ae81ff">classpath:idp-certificate.pem</span>
</span></span></code></pre></div><h4 id="step-3-enable-saml-in-security-configuration"><strong>Step 3: Enable SAML in Security Configuration</strong><a hidden class="anchor" aria-hidden="true" href="#step-3-enable-saml-in-security-configuration">#</a></h4>
<p>Extend <code>WebSecurityConfigurerAdapter</code> (Spring Boot 2.x) or use <code>SecurityFilterChain</code> (Spring Boot 3.x):</p>
<p><strong>Spring Boot 3.x Example:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@EnableWebSecurity</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SecurityConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    SecurityFilterChain <span style="color:#a6e22e">samlFilterChain</span>(HttpSecurity http) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        http
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">authorizeHttpRequests</span>(auth <span style="color:#f92672">-&gt;</span> auth
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">anyRequest</span>().<span style="color:#a6e22e">authenticated</span>()
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">saml2Login</span>(saml2 <span style="color:#f92672">-&gt;</span> saml2
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">relyingParty</span>(rp <span style="color:#f92672">-&gt;</span> rp
</span></span><span style="display:flex;"><span>                    .<span style="color:#a6e22e">registration</span>(registration <span style="color:#f92672">-&gt;</span> registration
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">entityId</span>(<span style="color:#e6db74">&#34;urn:example:sp&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">assertingParty</span>(party <span style="color:#f92672">-&gt;</span> party
</span></span><span style="display:flex;"><span>                            .<span style="color:#a6e22e">entityId</span>(<span style="color:#e6db74">&#34;urn:example:idp&#34;</span>)
</span></span><span style="display:flex;"><span>                            .<span style="color:#a6e22e">singleSignOnServiceLocation</span>(<span style="color:#e6db74">&#34;https://idp.example.com/saml2/sso&#34;</span>)
</span></span><span style="display:flex;"><span>                            .<span style="color:#a6e22e">verificationCredentials</span>(c <span style="color:#f92672">-&gt;</span> c
</span></span><span style="display:flex;"><span>                                .<span style="color:#a6e22e">certificateLocation</span>(<span style="color:#e6db74">&#34;classpath:idp-certificate.pem&#34;</span>)
</span></span><span style="display:flex;"><span>                            )
</span></span><span style="display:flex;"><span>                        )
</span></span><span style="display:flex;"><span>                    )
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> http.<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h3 id="2-local-and-remote-metadata-setup"><strong>2. Local and Remote Metadata Setup</strong><a hidden class="anchor" aria-hidden="true" href="#2-local-and-remote-metadata-setup">#</a></h3>
<h4 id="local-metadata-sp-metadata"><strong>Local Metadata (SP Metadata)</strong><a hidden class="anchor" aria-hidden="true" href="#local-metadata-sp-metadata">#</a></h4>
<p>Spring Security can generate SP metadata dynamically or use a static file.</p>
<p><strong>Generate Dynamically:</strong><br>
Access <code>/saml2/service-provider-metadata/{registrationId}</code> (e.g., <code>/saml2/service-provider-metadata/idp-name</code>).</p>
<p><strong>Static Metadata File:</strong></p>
<ol>
<li>Create an XML file (e.g., <code>sp-metadata.xml</code>) with your SP details.</li>
<li>Configure it in <code>application.yml</code>:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">security</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">saml2</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">relyingparty</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">registration</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">idp-name</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">serviceprovider</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">entity-id</span>: <span style="color:#ae81ff">urn:example:sp</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">metadata-location</span>: <span style="color:#ae81ff">classpath:sp-metadata.xml</span>
</span></span></code></pre></div><h4 id="remote-metadata-idp-metadata"><strong>Remote Metadata (IdP Metadata)</strong><a hidden class="anchor" aria-hidden="true" href="#remote-metadata-idp-metadata">#</a></h4>
<p>Provide the IdP’s metadata URL or file:</p>
<p><strong>Via URL:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">security</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">saml2</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">relyingparty</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">registration</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">idp-name</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">identityprovider</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">metadata-uri</span>: <span style="color:#ae81ff">https://idp.example.com/metadata.xml</span>
</span></span></code></pre></div><p><strong>Via File:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">metadata-location</span>: <span style="color:#ae81ff">classpath:idp-metadata.xml</span>
</span></span></code></pre></div><hr>
<h3 id="3-user-attribute-mapping-attributemapping"><strong>3. User Attribute Mapping (AttributeMapping)</strong><a hidden class="anchor" aria-hidden="true" href="#3-user-attribute-mapping-attributemapping">#</a></h3>
<p>SAML assertions include user attributes (e.g., <code>email</code>, <code>name</code>). Map these to Spring Security’s <code>Principal</code>:</p>
<h4 id="default-attribute-mapping"><strong>Default Attribute Mapping</strong><a hidden class="anchor" aria-hidden="true" href="#default-attribute-mapping">#</a></h4>
<p>Spring Security automatically maps:</p>
<ul>
<li><code>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</code> → <code>Principal.getName()</code></li>
<li><code>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</code> → <code>Principal.getAttribute(&quot;given_name&quot;)</code></li>
</ul>
<h4 id="custom-mapping"><strong>Custom Mapping</strong><a hidden class="anchor" aria-hidden="true" href="#custom-mapping">#</a></h4>
<p>Override defaults in <code>SecurityConfig</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">saml2Login</span>(saml2 <span style="color:#f92672">-&gt;</span> saml2
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">relyingParty</span>(...)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">userDetailsService</span>(userDetailsService())
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">attributeMapping</span>(attrs <span style="color:#f92672">-&gt;</span> attrs
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">name</span>(<span style="color:#e6db74">&#34;email&#34;</span>) <span style="color:#75715e">// Maps NameID or specified attribute to Principal</span>
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">samlAttribute</span>(<span style="color:#e6db74">&#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&#34;</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p><strong>Example: Extract Roles from SAML</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>.<span style="color:#a6e22e">saml2Login</span>(saml2 <span style="color:#f92672">-&gt;</span> saml2
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">attributeMapping</span>(attrs <span style="color:#f92672">-&gt;</span> attrs
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">roles</span>(<span style="color:#e6db74">&#34;http://schemas.microsoft.com/ws/2008/06/identity/claims/role&#34;</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><hr>
<h3 id="4-full-flow-example-with-metadata"><strong>4. Full Flow Example with Metadata</strong><a hidden class="anchor" aria-hidden="true" href="#4-full-flow-example-with-metadata">#</a></h3>
<ol>
<li>
<p><strong>User Visits <code>/login</code></strong>:</p>
<ul>
<li>Redirects to IdP’s SSO URL (<code>https://idp.example.com/saml2/sso</code>).</li>
</ul>
</li>
<li>
<p><strong>IdP Authenticates User</strong>:</p>
<ul>
<li>Returns a SAML response to <code>/saml2/acs</code> (Assertion Consumer Service).</li>
</ul>
</li>
<li>
<p><strong>Spring Security Validates Assertion</strong>:</p>
<ul>
<li>Verifies the signature using the IdP’s certificate.</li>
<li>Maps attributes to <code>Principal</code>.</li>
</ul>
</li>
<li>
<p><strong>User Granted Access</strong>:</p>
<ul>
<li>Authenticated session established.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="conclusion"><strong>Conclusion</strong><a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h3>
<p>Spring Security’s SAML extension simplifies integration with SAML-based IdPs. Key steps include:</p>
<ol>
<li>Configuring dependencies and properties.</li>
<li>Setting up SP/IdP metadata (local or remote).</li>
<li>Customizing attribute mapping for user details.</li>
</ol>
<p>For advanced scenarios, refer to the <a href="https://docs.spring.io/spring-security/reference/servlet/saml2/index.html">Spring Security SAML Documentation</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.iamdevbox.com/tags/spring-security/">Spring Security</a></li>
      <li><a href="https://www.iamdevbox.com/tags/saml/">SAML</a></li>
      <li><a href="https://www.iamdevbox.com/tags/sso/">SSO</a></li>
      <li><a href="https://www.iamdevbox.com/tags/authentication/">Authentication</a></li>
      <li><a href="https://www.iamdevbox.com/tags/identity-provider/">Identity Provider</a></li>
      <li><a href="https://www.iamdevbox.com/tags/service-provider/">Service Provider</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.iamdevbox.com/posts/saml-security-digital-signatures-encryption-and-x509-certificate-verification/">
    <span class="title">« Prev</span>
    <br>
    <span>SAML Security: Digital Signatures, Encryption, and X.509 Certificate Verification</span>
  </a>
  <a class="next" href="https://www.iamdevbox.com/posts/implementing-saml-sso-with-forgerock/">
    <span class="title">Next »</span>
    <br>
    <span>Implementing SAML SSO with ForgeRock</span>
  </a>
</nav>

  </footer>

  
  

  
  <section class="post-related-articles custom-section">
    <h2 class="custom-section-title">
      Related Articles
    </h2>
    
    
    <ul class="custom-list">
      
      
        
          <li class="custom-list-item">
            <a href="/posts/forgerock-identity-gateway-api-security-best-practices/" class="custom-link">
              ForgeRock Identity Gateway: API Security Best Practices
            </a>
            <small class="custom-date">2025-06-02</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/the-evolution-of-multi-tenant-identity-management-systems-architecture/" class="custom-link">
              The Evolution of Multi-Tenant Identity Management Systems Architecture
            </a>
            <small class="custom-date">2025-05-28</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/testing-saml-and-oidc-authorization-flows-with-postman/" class="custom-link">
              Testing SAML and OIDC Authorization Flows with Postman
            </a>
            <small class="custom-date">2025-05-26</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/implementing-federated-identity-authentication-with-forgerock-and-google-workspace-idp-mode/" class="custom-link">
              Implementing Federated Identity Authentication with ForgeRock and Google Workspace (IdP Mode)
            </a>
            <small class="custom-date">2025-05-24</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/understanding-saml-cookie-issues-why-you-keep-redirecting-to-the-login-page/" class="custom-link">
              Understanding SAML Cookie Issues: Why You Keep Redirecting to the Login Page
            </a>
            <small class="custom-date">2025-05-24</small>
          </li>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      

      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
  

  <section class="post-recent-articles custom-section-alt">
    <h2 class="custom-section-title">
      Latest Articles
    </h2>
    
    
    
    <ul class="custom-list">
      
      
        
          
            <li class="custom-list-item">
              <a href="/posts/forgerock-identity-gateway-api-security-best-practices/" class="custom-link">
                ForgeRock Identity Gateway: API Security Best Practices
              </a>
              <small class="custom-date">2025-06-02</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/designing-containerized-java-microservice-architecture/" class="custom-link">
                Designing Containerized Java Microservice Architecture
              </a>
              <small class="custom-date">2025-06-01</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/forgerock-vs-keycloak-choosing-the-right-iam-solution-for-your-organization/" class="custom-link">
                ForgeRock vs Keycloak: Choosing the Right IAM Solution for Your Organization
              </a>
              <small class="custom-date">2025-05-28</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/setting-up-a-cicd-pipeline-to-kubernetes-with-github-actions/" class="custom-link">
                Setting Up a CI/CD Pipeline to Kubernetes with GitHub Actions
              </a>
              <small class="custom-date">2025-05-28</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/deploying-highly-available-java-microservices-on-kubernetes-a-step-by-step-guide/" class="custom-link">
                Deploying Highly Available Java Microservices on Kubernetes: A Step-by-Step Guide
              </a>
              <small class="custom-date">2025-05-28</small>
            </li>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
</article>
    </main>
    
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.iamdevbox.com/">IAMDevBox</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        window.requestAnimationFrame(() => {
            const savedScroll = localStorage.getItem("menu-scroll-position");
            if (savedScroll !== null) {
            menu.scrollLeft = savedScroll;
            }
        });

        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
