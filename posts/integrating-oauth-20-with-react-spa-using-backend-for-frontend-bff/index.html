<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF) | IAMDevBox</title>
<meta name="keywords" content="OAuth 2.0, React SPA, Backend-for-Frontend, BFF, Authorization Code Flow, Security">
<meta name="author" content="IAMDevBox">
<link rel="canonical" href="https://www.iamdevbox.com/posts/integrating-oauth-20-with-react-spa-using-backend-for-frontend-bff/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">


<link rel="icon" href="https://www.iamdevbox.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.iamdevbox.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.iamdevbox.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.iamdevbox.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.iamdevbox.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.iamdevbox.com/posts/integrating-oauth-20-with-react-spa-using-backend-for-frontend-bff/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css"></noscript>

<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<meta property="og:url" content="https://www.iamdevbox.com/posts/integrating-oauth-20-with-react-spa-using-backend-for-frontend-bff/">
  <meta property="og:site_name" content="IAMDevBox">
  <meta property="og:title" content="Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)">
  <meta property="og:description" content="Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the...">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-04T21:09:20+00:00">
    <meta property="article:modified_time" content="2025-06-06T19:33:33-04:00">
    <meta property="article:tag" content="OAuth 2.0">
    <meta property="article:tag" content="React SPA">
    <meta property="article:tag" content="Backend-for-Frontend">
    <meta property="article:tag" content="BFF">
    <meta property="article:tag" content="Authorization Code Flow">
    <meta property="article:tag" content="Security">
      <meta property="og:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg">
<meta name="twitter:title" content="Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)">
<meta name="twitter:description" content="Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the...">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "All posts",
      "item": "https://www.iamdevbox.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)",
      "item": "https://www.iamdevbox.com/posts/integrating-oauth-20-with-react-spa-using-backend-for-frontend-bff/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)",
  "name": "Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)",
  "description": "Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the...",
  "keywords": [
    "OAuth 2.0", "React SPA", "Backend-for-Frontend", "BFF", "Authorization Code Flow", "Security"
  ],
  "articleBody": "Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the browser. The Backend-for-Frontend (BFF) pattern provides an elegant solution by shifting sensitive OAuth token handling to a trusted backend while keeping the frontend lightweight.\nThis article walks you through implementing the OAuth 2.0 Authorization Code Flow with PKCE using React as the frontend and a Node.js/Express backend acting as the BFF.\nWhy Use BFF for OAuth 2.0 in React SPA? SPAs are public clients; they cannot securely store client secrets. Handling tokens only on the backend reduces XSS and CSRF risks. BFF acts as a secure token proxy for API calls. Enables easier session management and refresh token rotation. Overview of the Architecture User Browser (React SPA) | (1) Login redirect (2) OAuth server login and consent | | v v Backend-for-Frontend (Node.js/Express) | (3) Token exchange and storage | (4) API requests with access token Step 1: React SPA - Initiate Login In React, you trigger the login by requesting the BFF to redirect:\n// React snippet to call BFF login function login() { window.location.href = 'http://localhost:3000/login'; } The frontend does not handle tokens directly — it just redirects users.\nStep 2: BFF - Redirect to OAuth Server Backend prepares the authorization URL with PKCE parameters:\n// Express /login route to redirect user to OAuth server const crypto = require('crypto'); const querystring = require('querystring'); app.get('/login', (req, res) =\u003e { // Generate code_verifier and code_challenge for PKCE const codeVerifier = crypto.randomBytes(32).toString('hex'); const codeChallenge = base64urlEncode(sha256(codeVerifier)); // Store codeVerifier in session or secure cookie req.session.codeVerifier = codeVerifier; const params = { response_type: 'code', client_id: process.env.CLIENT_ID, redirect_uri: 'http://localhost:3000/callback', scope: 'openid profile email', code_challenge: codeChallenge, code_challenge_method: 'S256', state: crypto.randomBytes(16).toString('hex') }; const authUrl = `https://oauth-server.com/authorize?${querystring.stringify(params)}`; res.redirect(authUrl); }); Step 3: BFF - Handle Callback and Exchange Code app.get('/callback', async (req, res) =\u003e { const { code } = req.query; const codeVerifier = req.session.codeVerifier; try { const tokenResponse = await axios.post('https://oauth-server.com/token', querystring.stringify({ grant_type: 'authorization_code', code, redirect_uri: 'http://localhost:3000/callback', client_id: process.env.CLIENT_ID, code_verifier: codeVerifier }), { headers: { 'Content-Type': 'application/x-www-form-urlencoded' } } ); // Store tokens securely in session req.session.tokens = tokenResponse.data; // Redirect to frontend SPA res.redirect('http://localhost:3001'); // React app URL } catch (error) { res.status(500).send('Token exchange failed'); } }); Step 4: React SPA Fetches Data via BFF React SPA calls the BFF API to access protected resources without seeing tokens:\n// React fetch example async function fetchProfile() { const response = await fetch('http://localhost:3000/api/profile', { credentials: 'include' }); const profile = await response.json(); console.log(profile); } Step 5: BFF Proxy API Requests with Access Token app.get('/api/profile', async (req, res) =\u003e { if (!req.session.tokens) return res.status(401).send('Unauthorized'); try { const userInfo = await axios.get('https://oauth-server.com/userinfo', { headers: { Authorization: `Bearer ${req.session.tokens.access_token}` } }); res.json(userInfo.data); } catch (error) { res.status(500).send('Failed to fetch user info'); } }); Security Considerations Use HTTPS to protect data in transit. Secure cookies and proper session handling on the backend. Rotate tokens and implement refresh token logic on the BFF. Protect endpoints from CSRF attacks. Real-World Use Cases The BFF pattern is increasingly popular for SPA apps that require OAuth 2.0 login flows without exposing tokens to the browser — used by enterprises with ForgeRock Identity Cloud, Auth0, and others.\n👉 Related:\nUnderstanding the Authorization Code Flow with PKCE in OAuth 2.0\nHow to Implement the OAuth 2.0 Authorization Code Flow in Java\nConclusion The Backend-for-Frontend pattern enhances security and scalability for OAuth 2.0 in React SPAs. By delegating token handling to a trusted backend, you reduce attack surfaces and simplify token lifecycle management.\n💡 What else can you explore?\nHow to implement refresh token rotation securely in the BFF? What’s new in OAuth 2.1 that impacts SPA security models? Can BFF be combined with decentralized identity solutions? Stay tuned for deeper dives into these topics soon.\n",
  "wordCount" : "632",
  "inLanguage": "en",
  "image": "https://www.iamdevbox.com/IAMDevBox.com.jpg","datePublished": "2025-06-04T21:09:20Z",
  "dateModified": "2025-06-06T19:33:33-04:00",
  "author":{
    "@type": "Person",
    "name": "IAMDevBox"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.iamdevbox.com/posts/integrating-oauth-20-with-react-spa-using-backend-for-frontend-bff/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "IAMDevBox",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.iamdevbox.com/favicon.ico"
    }
  }
}
</script><meta name="description" content="Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the...">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/advanced-forgerock-forgeops-helm-deployment-on-openshift-crc-custom-images-secrets-and-security-contexts\/"
            },
            "headline": "\"Advanced ForgeRock ForgeOps Helm Deployment on OpenShift CRC: Custom Images, Secrets, and Security Contexts\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-14T12:40:16-04:00",
            "dateModified": "2025-06-14T13:16:33-04:00"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/deploying-forgerock-forgeops-on-red-hat-openshift-crc-a-step-by-step-guide\/"
            },
            "headline": "\"Deploying ForgeRock ForgeOps on Red Hat OpenShift CRC: A Step-by-Step Guide\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-14T12:40:16-04:00",
            "dateModified": "2025-06-14T13:16:33-04:00"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/jwt-decoding-and-validation-how-to-securely-parse-and-verify-your-tokens\/"
            },
            "headline": "\"JWT Decoding and Validation: How to Securely Parse and Verify Your Tokens\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-14T11:53:59-04:00",
            "dateModified": "2025-06-14T11:59:00-04:00"
          }
  ]
}
</script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "\"What else can you explore?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"How to implement refresh token rotation securely in the BFF?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"Can BFF be combined with decentralized identity solutions?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    }
  ]
}
</script>
    
    <script>
    document.addEventListener("DOMContentLoaded", () => {
    if (document.querySelector('.mermaid')) {
        const script = document.createElement('script');
        script.src = "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js";
        script.onload = () => {
        mermaid.initialize({ startOnLoad: true, theme: "default" });
        };
        document.head.appendChild(script);
    }
    });
    </script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6QCH29975"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B6QCH29975');
    </script>
    
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.iamdevbox.com/" accesskey="h" title="IAMDevBox (Alt + H)">IAMDevBox</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.iamdevbox.com/posts/" title="Read articles and updates">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/tools/" title="Explore developer tools">
                    <span>🧰Tools</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/search/" title="Search this site">
                    <span>🔍</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.iamdevbox.com/">Home</a>&nbsp;»&nbsp;<a href="https://www.iamdevbox.com/posts/">All posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Integrating OAuth 2.0 with React SPA using Backend-for-Frontend (BFF)
    </h1>
    
    <div class="post-meta">3 min&nbsp;·&nbsp;632 words&nbsp;·&nbsp;IAMDevBox

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#why-use-bff-for-oauth-20-in-react-spa" aria-label="Why Use BFF for OAuth 2.0 in React SPA?">Why Use BFF for OAuth 2.0 in React SPA?</a></li>
                <li>
                    <a href="#overview-of-the-architecture" aria-label="Overview of the Architecture">Overview of the Architecture</a></li>
                <li>
                    <a href="#step-1-react-spa---initiate-login" aria-label="Step 1: React SPA - Initiate Login">Step 1: React SPA - Initiate Login</a></li>
                <li>
                    <a href="#step-2-bff---redirect-to-oauth-server" aria-label="Step 2: BFF - Redirect to OAuth Server">Step 2: BFF - Redirect to OAuth Server</a></li>
                <li>
                    <a href="#step-3-bff---handle-callback-and-exchange-code" aria-label="Step 3: BFF - Handle Callback and Exchange Code">Step 3: BFF - Handle Callback and Exchange Code</a></li>
                <li>
                    <a href="#step-4-react-spa-fetches-data-via-bff" aria-label="Step 4: React SPA Fetches Data via BFF">Step 4: React SPA Fetches Data via BFF</a></li>
                <li>
                    <a href="#step-5-bff-proxy-api-requests-with-access-token" aria-label="Step 5: BFF Proxy API Requests with Access Token">Step 5: BFF Proxy API Requests with Access Token</a></li>
                <li>
                    <a href="#security-considerations" aria-label="Security Considerations">Security Considerations</a></li>
                <li>
                    <a href="#real-world-use-cases" aria-label="Real-World Use Cases">Real-World Use Cases</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Single Page Applications (SPAs) like React apps face unique challenges when handling OAuth 2.0 flows due to security concerns with exposing tokens in the browser. The <strong>Backend-for-Frontend (BFF)</strong> pattern provides an elegant solution by shifting sensitive OAuth token handling to a trusted backend while keeping the frontend lightweight.</p>
<p>This article walks you through implementing the OAuth 2.0 Authorization Code Flow with PKCE using React as the frontend and a Node.js/Express backend acting as the BFF.</p>
<hr>
<h3 id="why-use-bff-for-oauth-20-in-react-spa"><strong>Why Use BFF for OAuth 2.0 in React SPA?</strong><a hidden class="anchor" aria-hidden="true" href="#why-use-bff-for-oauth-20-in-react-spa">#</a></h3>
<ul>
<li>SPAs are public clients; they cannot securely store client secrets.</li>
<li>Handling tokens only on the backend reduces XSS and CSRF risks.</li>
<li>BFF acts as a secure token proxy for API calls.</li>
<li>Enables easier session management and refresh token rotation.</li>
</ul>
<hr>
<h3 id="overview-of-the-architecture"><strong>Overview of the Architecture</strong><a hidden class="anchor" aria-hidden="true" href="#overview-of-the-architecture">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plaintext" data-lang="plaintext"><span style="display:flex;"><span>User Browser (React SPA)
</span></span><span style="display:flex;"><span>        |
</span></span><span style="display:flex;"><span>(1) Login redirect         (2) OAuth server login and consent
</span></span><span style="display:flex;"><span>        |                          |
</span></span><span style="display:flex;"><span>        v                          v
</span></span><span style="display:flex;"><span>Backend-for-Frontend (Node.js/Express)
</span></span><span style="display:flex;"><span>        |
</span></span><span style="display:flex;"><span>(3) Token exchange and storage
</span></span><span style="display:flex;"><span>        |
</span></span><span style="display:flex;"><span>(4) API requests with access token
</span></span></code></pre></div><hr>
<h3 id="step-1-react-spa---initiate-login"><strong>Step 1: React SPA - Initiate Login</strong><a hidden class="anchor" aria-hidden="true" href="#step-1-react-spa---initiate-login">#</a></h3>
<p>In React, you trigger the login by requesting the BFF to redirect:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// React snippet to call BFF login
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">login</span>() {
</span></span><span style="display:flex;"><span>  window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://localhost:3000/login&#39;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The frontend does not handle tokens directly — it just redirects users.</p>
<hr>
<h3 id="step-2-bff---redirect-to-oauth-server"><strong>Step 2: BFF - Redirect to OAuth Server</strong><a hidden class="anchor" aria-hidden="true" href="#step-2-bff---redirect-to-oauth-server">#</a></h3>
<p>Backend prepares the authorization URL with PKCE parameters:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Express /login route to redirect user to OAuth server
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">crypto</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;crypto&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">querystring</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;querystring&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Generate code_verifier and code_challenge for PKCE
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">codeVerifier</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">crypto</span>.<span style="color:#a6e22e">randomBytes</span>(<span style="color:#ae81ff">32</span>).<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">codeChallenge</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">base64urlEncode</span>(<span style="color:#a6e22e">sha256</span>(<span style="color:#a6e22e">codeVerifier</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Store codeVerifier in session or secure cookie
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">session</span>.<span style="color:#a6e22e">codeVerifier</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">codeVerifier</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">params</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">response_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;code&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client_id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">CLIENT_ID</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">redirect_uri</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http://localhost:3000/callback&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scope</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;openid profile email&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code_challenge</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">codeChallenge</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code_challenge_method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;S256&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">crypto</span>.<span style="color:#a6e22e">randomBytes</span>(<span style="color:#ae81ff">16</span>).<span style="color:#a6e22e">toString</span>(<span style="color:#e6db74">&#39;hex&#39;</span>)
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">authUrl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`https://oauth-server.com/authorize?</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">querystring</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">params</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">redirect</span>(<span style="color:#a6e22e">authUrl</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><hr>
<h3 id="step-3-bff---handle-callback-and-exchange-code"><strong>Step 3: BFF - Handle Callback and Exchange Code</strong><a hidden class="anchor" aria-hidden="true" href="#step-3-bff---handle-callback-and-exchange-code">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/callback&#39;</span>, <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">code</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">query</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">codeVerifier</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">session</span>.<span style="color:#a6e22e">codeVerifier</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tokenResponse</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;https://oauth-server.com/token&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">querystring</span>.<span style="color:#a6e22e">stringify</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">grant_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;authorization_code&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">code</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">redirect_uri</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http://localhost:3000/callback&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">client_id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">CLIENT_ID</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">code_verifier</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">codeVerifier</span>
</span></span><span style="display:flex;"><span>      }),
</span></span><span style="display:flex;"><span>      { <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> { <span style="color:#e6db74">&#39;Content-Type&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;application/x-www-form-urlencoded&#39;</span> } }
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Store tokens securely in session
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">session</span>.<span style="color:#a6e22e">tokens</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">tokenResponse</span>.<span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Redirect to frontend SPA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;http://localhost:3001&#39;</span>); <span style="color:#75715e">// React app URL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">500</span>).<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#39;Token exchange failed&#39;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><hr>
<h3 id="step-4-react-spa-fetches-data-via-bff"><strong>Step 4: React SPA Fetches Data via BFF</strong><a hidden class="anchor" aria-hidden="true" href="#step-4-react-spa-fetches-data-via-bff">#</a></h3>
<p>React SPA calls the BFF API to access protected resources without seeing tokens:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// React fetch example
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fetchProfile</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;http://localhost:3000/api/profile&#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">credentials</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;include&#39;</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">profile</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">json</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">profile</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h3 id="step-5-bff-proxy-api-requests-with-access-token"><strong>Step 5: BFF Proxy API Requests with Access Token</strong><a hidden class="anchor" aria-hidden="true" href="#step-5-bff-proxy-api-requests-with-access-token">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/api/profile&#39;</span>, <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">session</span>.<span style="color:#a6e22e">tokens</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">401</span>).<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#39;Unauthorized&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">userInfo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;https://oauth-server.com/userinfo&#39;</span>, {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">Authorization</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Bearer </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">session</span>.<span style="color:#a6e22e">tokens</span>.<span style="color:#a6e22e">access_token</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span> }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>(<span style="color:#a6e22e">userInfo</span>.<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span>(<span style="color:#ae81ff">500</span>).<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#39;Failed to fetch user info&#39;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><hr>
<h3 id="security-considerations"><strong>Security Considerations</strong><a hidden class="anchor" aria-hidden="true" href="#security-considerations">#</a></h3>
<ul>
<li>Use HTTPS to protect data in transit.</li>
<li>Secure cookies and proper session handling on the backend.</li>
<li>Rotate tokens and implement refresh token logic on the BFF.</li>
<li>Protect endpoints from CSRF attacks.</li>
</ul>
<hr>
<h3 id="real-world-use-cases"><strong>Real-World Use Cases</strong><a hidden class="anchor" aria-hidden="true" href="#real-world-use-cases">#</a></h3>
<p>The BFF pattern is increasingly popular for SPA apps that require OAuth 2.0 login flows without exposing tokens to the browser — used by enterprises with ForgeRock Identity Cloud, Auth0, and others.</p>
<p><strong>👉 Related:</strong></p>
<p><a href="/posts/understanding-the-authorization-code-flow-with-pkce-in-oauth-20/">Understanding the Authorization Code Flow with PKCE in OAuth 2.0</a></p>
<p><a href="/posts/how-to-implement-the-oauth-20-authorization-code-flow-in-java/">How to Implement the OAuth 2.0 Authorization Code Flow in Java</a></p>
<hr>
<h3 id="conclusion"><strong>Conclusion</strong><a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h3>
<p>The Backend-for-Frontend pattern enhances security and scalability for OAuth 2.0 in React SPAs. By delegating token handling to a trusted backend, you reduce attack surfaces and simplify token lifecycle management.</p>
<p>💡 <strong>What else can you explore?</strong></p>
<ul>
<li>How to implement refresh token rotation securely in the BFF?</li>
<li>What’s new in OAuth 2.1 that impacts SPA security models?</li>
<li>Can BFF be combined with decentralized identity solutions?</li>
</ul>
<p>Stay tuned for deeper dives into these topics soon.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.iamdevbox.com/tags/oauth-2.0/">OAuth 2.0</a></li>
      <li><a href="https://www.iamdevbox.com/tags/react-spa/">React SPA</a></li>
      <li><a href="https://www.iamdevbox.com/tags/backend-for-frontend/">Backend-for-Frontend</a></li>
      <li><a href="https://www.iamdevbox.com/tags/bff/">BFF</a></li>
      <li><a href="https://www.iamdevbox.com/tags/authorization-code-flow/">Authorization Code Flow</a></li>
      <li><a href="https://www.iamdevbox.com/tags/security/">Security</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.iamdevbox.com/posts/how-we-solved-token-misrouting-in-forgerock-identity-cloud/">
    <span class="title">« Prev</span>
    <br>
    <span>How We Solved Token Misrouting in ForgeRock Identity Cloud</span>
  </a>
  <a class="next" href="https://www.iamdevbox.com/posts/building-a-secure-pkce-flow-with-kotlin-and-spring-boot/">
    <span class="title">Next »</span>
    <br>
    <span>Building a Secure PKCE Flow with Kotlin and Spring Boot</span>
  </a>
</nav>

  </footer>

  
  

  
  <section class="post-related-articles custom-section">
    <h2 class="custom-section-title">
      Related Articles
    </h2>
    
    
    <ul class="custom-list">
      
      
        
          <li class="custom-list-item">
            <a href="/posts/my-devsecops-pipeline-security-from-code-to-production/" class="custom-link">
              My DevSecOps Pipeline: Security from Code to Production
            </a>
            <small class="custom-date">2025-06-13</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/navigating-iam-challenges-in-multi-cloud-environments/" class="custom-link">
              Navigating IAM Challenges in Multi-Cloud Environments
            </a>
            <small class="custom-date">2025-06-06</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/building-unified-identity-strategy-in-multi-cloud-environments/" class="custom-link">
              Building Unified Identity Strategy in Multi-Cloud Environments
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/oauth-20-token-introspection-real-time-validation-explained/" class="custom-link">
              OAuth 2.0 Token Introspection: Real-Time Validation Explained
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/oauth-21-whats-changing-and-why-it-matters/" class="custom-link">
              OAuth 2.1: What’s Changing and Why It Matters
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      

      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
  

  <section class="post-recent-articles custom-section-alt">
    <h2 class="custom-section-title">
      Latest Articles
    </h2>
    
    
    
    <ul class="custom-list">
      
      
        
          
            <li class="custom-list-item">
              <a href="/posts/advanced-forgerock-forgeops-helm-deployment-on-openshift-crc-custom-images-secrets-and-security-contexts/" class="custom-link">
                Advanced ForgeRock ForgeOps Helm Deployment on OpenShift CRC: Custom Images, Secrets, and Security Contexts
              </a>
              <small class="custom-date">2025-06-14</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/deploying-forgerock-forgeops-on-red-hat-openshift-crc-a-step-by-step-guide/" class="custom-link">
                Deploying ForgeRock ForgeOps on Red Hat OpenShift CRC: A Step-by-Step Guide
              </a>
              <small class="custom-date">2025-06-14</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/jwt-decoding-and-validation-how-to-securely-parse-and-verify-your-tokens/" class="custom-link">
                JWT Decoding and Validation: How to Securely Parse and Verify Your Tokens
              </a>
              <small class="custom-date">2025-06-14</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/how-to-debug-and-understand-saml-response-xml-a-practical-guide/" class="custom-link">
                How to Debug and Understand SAML Response XML: A Practical Guide
              </a>
              <small class="custom-date">2025-06-14</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/applying-java-modules-in-modern-microservice-architecture/" class="custom-link">
                Applying Java Modules in Modern Microservice Architecture
              </a>
              <small class="custom-date">2025-06-14</small>
            </li>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
</article>
    </main>
    
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.iamdevbox.com/">IAMDevBox</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        window.requestAnimationFrame(() => {
            const savedScroll = localStorage.getItem("menu-scroll-position");
            if (savedScroll !== null) {
            menu.scrollLeft = savedScroll;
            }
        });

        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
