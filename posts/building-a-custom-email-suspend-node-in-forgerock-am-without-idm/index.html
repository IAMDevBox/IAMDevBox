<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Building a Custom Email Suspend Node in ForgeRock AM Without IDM | IAMDevBox</title>
<meta name="keywords" content="ForgeRock AM, Custom Tree Node, Email Verification, Identity Management, Authentication Flows">
<meta name="author" content="IAMDevBox">
<link rel="canonical" href="https://www.iamdevbox.com/posts/building-a-custom-email-suspend-node-in-forgerock-am-without-idm/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">


<link rel="icon" href="https://www.iamdevbox.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.iamdevbox.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.iamdevbox.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.iamdevbox.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.iamdevbox.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.iamdevbox.com/posts/building-a-custom-email-suspend-node-in-forgerock-am-without-idm/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css"></noscript>

<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<meta property="og:url" content="https://www.iamdevbox.com/posts/building-a-custom-email-suspend-node-in-forgerock-am-without-idm/">
  <meta property="og:site_name" content="IAMDevBox">
  <meta property="og:title" content="Building a Custom Email Suspend Node in ForgeRock AM Without IDM">
  <meta property="og:description" content="ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences....">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-05-22T09:44:22+00:00">
    <meta property="article:modified_time" content="2025-06-06T19:33:33-04:00">
    <meta property="article:tag" content="ForgeRock AM">
    <meta property="article:tag" content="Custom Tree Node">
    <meta property="article:tag" content="Email Verification">
    <meta property="article:tag" content="Identity Management">
    <meta property="article:tag" content="Authentication Flows">
      <meta property="og:image" content="https://www.iamdevbox.com/static/IAMDevBox.com.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.iamdevbox.com/static/IAMDevBox.com.png">
<meta name="twitter:title" content="Building a Custom Email Suspend Node in ForgeRock AM Without IDM">
<meta name="twitter:description" content="ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences....">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "All posts",
      "item": "https://www.iamdevbox.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Building a Custom Email Suspend Node in ForgeRock AM Without IDM",
      "item": "https://www.iamdevbox.com/posts/building-a-custom-email-suspend-node-in-forgerock-am-without-idm/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Building a Custom Email Suspend Node in ForgeRock AM Without IDM",
  "name": "Building a Custom Email Suspend Node in ForgeRock AM Without IDM",
  "description": "ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences....",
  "keywords": [
    "ForgeRock AM", "Custom Tree Node", "Email Verification", "Identity Management", "Authentication Flows"
  ],
  "articleBody": "ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences. One of its useful features, the EmailSuspendNode, traditionally relies on ForgeRock Identity Management (IDM) for full functionality. But what if you‚Äôre not using IDM? This post walks through how to build a custom ForgeRock AM node that replicates the core functionality of EmailSuspendNode‚Äîcomplete with email delivery, resume flow support, and secure suspend/resume logic‚Äîall without needing IDM integration.\nüîß Why Customize EmailSuspendNode in ForgeRock AM? In environments where ForgeRock IDM is not deployed, the native EmailSuspendNode in ForgeRock AM becomes difficult to use out of the box. However, email verification flows are a critical component of modern identity systems‚Äîfor passwordless authentication, user registration verification, and multi-factor flows.\nA custom node helps bridge this gap, allowing full control over email dispatch, suspend-resume logic, and templated messages within ForgeRock AM alone. This approach is ideal for lightweight deployments or decoupled architectures where IDM is not in scope.\nüì¨ How the Custom Node Works At a high level, this custom node checks if the current context has resumed from suspension. If not, it triggers the suspend flow, sends a verification email to the user, and halts execution until the user clicks the email link.\nHere‚Äôs the main logic in the process() method:\npublic Action process(TreeContext context) throws NodeProcessException { if (context.hasResumedFromSuspend()) { return this.goToNext().build(); } else { return Action.suspend((resumeURI) -\u003e { try { return this.createSuspendOutcome(context, resumeURI); } catch (Exception ex) { logger.error(ex.getMessage()); return SuspendedTextOutputCallback.error(ex.getMessage()); } }).build(); } } This logic ensures a seamless suspend/resume authentication experience. Once the email link is clicked, the flow picks up where it left off.\nüß† Creating the Resume Email with Custom URL The most critical part of the node is generating a valid resume link and sending it via email. Here‚Äôs the method handling that logic:\nprivate SuspendedTextOutputCallback createSuspendOutcome(TreeContext context, URI resumeURI) throws MessagingException { String mail = context.sharedState.get(\"mail\").asString(); String returnUrl = this.config.returnUrl(); if (mail != null \u0026\u0026 returnUrl != null) { String suspendedId = Arrays.stream(resumeURI.getQuery().split(\"\u0026\")) .filter(p -\u003e p.startsWith(\"suspendedId=\")) .map(p -\u003e p.split(\"=\")[1]) .findFirst() .orElse(null); returnUrl = returnUrl + suspendedId; String messageBody = this.config.messageTemplate().replace(\"{{returnUrl}}\", returnUrl); this.sendEmail(this.config.hostName(), String.valueOf(this.config.hostPort()), this.config.username(), this.config.password() == null ? null : String.valueOf(this.config.password()), this.config.emailSubject(), this.config.sslOption(), mail, messageBody); } return SuspendedTextOutputCallback.info(this.config.emailSuspendMessage()); } This function parses the suspended ID from the resume URI, builds a return URL, and sends a templated email. A configuration interface allows full customization.\n‚úâÔ∏è Sending the Email Securely Email delivery is handled via JavaMail API with configurable support for SSL, STARTTLS, or plain SMTP. Here‚Äôs a simplified version:\npublic void sendEmail(String smtpHost, String smtpPort, String username, String password, String subject, Config.SslOption sslOption, String recipient, String messageBody) throws MessagingException { Properties props = new Properties(); props.put(\"mail.smtp.host\", smtpHost); props.put(\"mail.smtp.port\", smtpPort); props.put(\"mail.smtp.auth\", String.valueOf(password != null)); if (sslOption == Config.SslOption.SSL) { props.put(\"mail.smtp.ssl.enable\", \"true\"); } else if (sslOption == Config.SslOption.START_TLS) { props.put(\"mail.smtp.starttls.enable\", \"true\"); } Session session = Session.getInstance(props); MimeMessage message = new MimeMessage(session); message.setFrom(new InternetAddress(username)); message.addRecipient(Message.RecipientType.TO, new InternetAddress(recipient)); message.setSubject(subject); message.setContent(messageBody, \"text/html; charset=UTF-8\"); executorService.execute(() -\u003e { try { Transport.send(message, username, password); } catch (MessagingException ex) { logger.error(\"Failed to send email\", ex); } }); } This non-blocking approach ensures authentication flows remain performant and scalable.\nüß© Configuration Flexibility via Interface The Config interface allows admins to customize everything from SMTP settings to email subject and templates:\n@Attribute(order = 100) default String hostName() { return \"smtp.example.com\"; } @Attribute(order = 800) default String returnUrl() { return \"https://www.example.com/suspendId=\"; } @Attribute(order = 900) default String emailSuspendMessage() { return \"An email has been sent to the address you entered. Click the link in that email to proceed.\"; } This makes it easy to adapt the node for different environments or branding requirements.\n‚úÖ Real-World Use Case: Email Verification Without IDM Imagine a SaaS platform using ForgeRock AM for authentication but handling user profiles in a separate microservice. Instead of spinning up IDM just to manage EmailSuspendNode, this custom node can independently trigger an email verification link, thereby completing login or registration securely.\nThis aligns perfectly with microservices-based identity architectures and zero-trust principles.\nüß≠ Diagram: Suspend-Resume Flow ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ AM Tree ‚îÇ ‚îÇ Starts Flow ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚ñº ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇCustom Suspend‚îÇ ‚îÇ Node ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ Email Link ‚îÇ ‚ñº ‚îÇ User checks email ‚îÇ ‚îÇ ‚îÇ ‚ñº ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îÇResume with ID‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ Continues ‚îÇ ‚îÇ Flow ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò üí° Questions to Consider How could you adapt this approach to support SMS-based suspend/resume? What are the trade-offs of managing email verification purely in AM vs. integrating with IDM or an external service? Can this model support progressive profiling and attribute collection over time? By implementing a self-contained email verification node in ForgeRock AM, organizations gain agility, reduce dependencies, and tailor their authentication experience. Whether you‚Äôre modernizing legacy apps or building zero-IDM identity platforms, this custom node can be a critical enabler.\n",
  "wordCount" : "799",
  "inLanguage": "en",
  "image": "https://www.iamdevbox.com/static/IAMDevBox.com.png","datePublished": "2025-05-22T09:44:22Z",
  "dateModified": "2025-06-06T19:33:33-04:00",
  "author":{
    "@type": "Person",
    "name": "IAMDevBox"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.iamdevbox.com/posts/building-a-custom-email-suspend-node-in-forgerock-am-without-idm/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "IAMDevBox",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.iamdevbox.com/favicon.ico"
    }
  }
}
</script><meta name="description" content="ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences....">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/devops-is-not-just-tools--its-a-cultural-transformation\/"
            },
            "headline": "\"DevOps Is Not Just Tools ‚Äî It‚Äôs a Cultural Transformation\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-09T14:56:04Z",
            "dateModified": "2025-06-09T14:56:16Z"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/orchestrating-kubernetes-and-iam-with-terraform-a-comprehensive-guide\/"
            },
            "headline": "\"Orchestrating Kubernetes and IAM with Terraform: A Comprehensive Guide\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-08T13:49:52Z",
            "dateModified": "2025-06-08T09:53:31-04:00"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/navigating-iam-challenges-in-multi-cloud-environments\/"
            },
            "headline": "\"Navigating IAM Challenges in Multi-Cloud Environments\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-06-06T14:59:32Z",
            "dateModified": "2025-06-06T19:33:33-04:00"
          }
  ]
}
</script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "\"But what if you're not using IDM?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"Why Customize EmailSuspendNode in ForgeRock AM?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"How could you adapt this approach to support SMS-based suspend/resume?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"IDM or an external service?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"Can this model support progressive profiling and attribute collection over time?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    }
  ]
}
</script>
    
    <script>
    document.addEventListener("DOMContentLoaded", () => {
    if (document.querySelector('.mermaid')) {
        const script = document.createElement('script');
        script.src = "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js";
        script.onload = () => {
        mermaid.initialize({ startOnLoad: true, theme: "default" });
        };
        document.head.appendChild(script);
    }
    });
    </script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6QCH29975"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B6QCH29975');
    </script>
    
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.iamdevbox.com/" accesskey="h" title="IAMDevBox (Alt + H)">IAMDevBox</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.iamdevbox.com/posts/" title="Read articles and updates">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/tools/" title="Explore developer tools">
                    <span>üß∞Tools</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/search/" title="Search this site">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.iamdevbox.com/">Home</a>&nbsp;¬ª&nbsp;<a href="https://www.iamdevbox.com/posts/">All posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Building a Custom Email Suspend Node in ForgeRock AM Without IDM
    </h1>
    
    <div class="post-meta">4 min&nbsp;¬∑&nbsp;799 words&nbsp;¬∑&nbsp;IAMDevBox

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#-why-customize-emailsuspendnode-in-forgerock-am" aria-label="üîß Why Customize EmailSuspendNode in ForgeRock AM?">üîß Why Customize EmailSuspendNode in ForgeRock AM?</a></li>
                <li>
                    <a href="#-how-the-custom-node-works" aria-label="üì¨ How the Custom Node Works">üì¨ How the Custom Node Works</a></li>
                <li>
                    <a href="#-creating-the-resume-email-with-custom-url" aria-label="üß† Creating the Resume Email with Custom URL">üß† Creating the Resume Email with Custom URL</a></li>
                <li>
                    <a href="#-sending-the-email-securely" aria-label="‚úâÔ∏è Sending the Email Securely">‚úâÔ∏è Sending the Email Securely</a></li>
                <li>
                    <a href="#-configuration-flexibility-via-interface" aria-label="üß© Configuration Flexibility via Interface">üß© Configuration Flexibility via Interface</a></li>
                <li>
                    <a href="#-real-world-use-case-email-verification-without-idm" aria-label="‚úÖ Real-World Use Case: Email Verification Without IDM">‚úÖ Real-World Use Case: Email Verification Without IDM</a></li>
                <li>
                    <a href="#-diagram-suspend-resume-flow" aria-label="üß≠ Diagram: Suspend-Resume Flow">üß≠ Diagram: Suspend-Resume Flow</a></li>
                <li>
                    <a href="#-questions-to-consider" aria-label="üí° Questions to Consider">üí° Questions to Consider</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>ForgeRock Access Management (AM) offers a powerful and flexible authentication tree system, enabling enterprises to design secure and dynamic login experiences. One of its useful features, the <code>EmailSuspendNode</code>, traditionally relies on ForgeRock Identity Management (IDM) for full functionality. But what if you&rsquo;re not using IDM? This post walks through how to build a custom ForgeRock AM node that replicates the core functionality of <code>EmailSuspendNode</code>‚Äîcomplete with email delivery, resume flow support, and secure suspend/resume logic‚Äîall without needing IDM integration.</p>
<h3 id="-why-customize-emailsuspendnode-in-forgerock-am">üîß <strong>Why Customize EmailSuspendNode in ForgeRock AM?</strong><a hidden class="anchor" aria-hidden="true" href="#-why-customize-emailsuspendnode-in-forgerock-am">#</a></h3>
<p>In environments where ForgeRock IDM is not deployed, the native <code>EmailSuspendNode</code> in ForgeRock AM becomes difficult to use out of the box. However, email verification flows are a critical component of modern identity systems‚Äîfor passwordless authentication, user registration verification, and multi-factor flows.</p>
<p>A custom node helps bridge this gap, allowing full control over email dispatch, suspend-resume logic, and templated messages within ForgeRock AM alone. This approach is ideal for lightweight deployments or decoupled architectures where IDM is not in scope.</p>
<hr>
<h3 id="-how-the-custom-node-works">üì¨ <strong>How the Custom Node Works</strong><a hidden class="anchor" aria-hidden="true" href="#-how-the-custom-node-works">#</a></h3>
<p>At a high level, this custom node checks if the current context has resumed from suspension. If not, it triggers the suspend flow, sends a verification email to the user, and halts execution until the user clicks the email link.</p>
<p>Here‚Äôs the main logic in the <code>process()</code> method:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Action <span style="color:#a6e22e">process</span>(TreeContext context) <span style="color:#66d9ef">throws</span> NodeProcessException {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (context.<span style="color:#a6e22e">hasResumedFromSuspend</span>()) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">goToNext</span>().<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> Action.<span style="color:#a6e22e">suspend</span>((resumeURI) <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createSuspendOutcome</span>(context, resumeURI);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (Exception ex) {
</span></span><span style="display:flex;"><span>                logger.<span style="color:#a6e22e">error</span>(ex.<span style="color:#a6e22e">getMessage</span>());
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> SuspendedTextOutputCallback.<span style="color:#a6e22e">error</span>(ex.<span style="color:#a6e22e">getMessage</span>());
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }).<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This logic ensures a seamless suspend/resume authentication experience. Once the email link is clicked, the flow picks up where it left off.</p>
<hr>
<h3 id="-creating-the-resume-email-with-custom-url">üß† <strong>Creating the Resume Email with Custom URL</strong><a hidden class="anchor" aria-hidden="true" href="#-creating-the-resume-email-with-custom-url">#</a></h3>
<p>The most critical part of the node is generating a valid resume link and sending it via email. Here&rsquo;s the method handling that logic:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> SuspendedTextOutputCallback <span style="color:#a6e22e">createSuspendOutcome</span>(TreeContext context, URI resumeURI) <span style="color:#66d9ef">throws</span> MessagingException {
</span></span><span style="display:flex;"><span>    String mail <span style="color:#f92672">=</span> context.<span style="color:#a6e22e">sharedState</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;mail&#34;</span>).<span style="color:#a6e22e">asString</span>();
</span></span><span style="display:flex;"><span>    String returnUrl <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">returnUrl</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (mail <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> returnUrl <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>        String suspendedId <span style="color:#f92672">=</span> Arrays.<span style="color:#a6e22e">stream</span>(resumeURI.<span style="color:#a6e22e">getQuery</span>().<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34;&amp;&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">filter</span>(p <span style="color:#f92672">-&gt;</span> p.<span style="color:#a6e22e">startsWith</span>(<span style="color:#e6db74">&#34;suspendedId=&#34;</span>))
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">map</span>(p <span style="color:#f92672">-&gt;</span> p.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#34;=&#34;</span>)<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">findFirst</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">orElse</span>(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>        returnUrl <span style="color:#f92672">=</span> returnUrl <span style="color:#f92672">+</span> suspendedId;
</span></span><span style="display:flex;"><span>        String messageBody <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">messageTemplate</span>().<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#34;{{returnUrl}}&#34;</span>, returnUrl);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sendEmail</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">hostName</span>(), String.<span style="color:#a6e22e">valueOf</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">hostPort</span>()), <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">username</span>(),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">password</span>() <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">null</span> : String.<span style="color:#a6e22e">valueOf</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">password</span>()),
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">emailSubject</span>(), <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">sslOption</span>(), mail, messageBody);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> SuspendedTextOutputCallback.<span style="color:#a6e22e">info</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">emailSuspendMessage</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This function parses the suspended ID from the resume URI, builds a return URL, and sends a templated email. A configuration interface allows full customization.</p>
<hr>
<h3 id="-sending-the-email-securely">‚úâÔ∏è <strong>Sending the Email Securely</strong><a hidden class="anchor" aria-hidden="true" href="#-sending-the-email-securely">#</a></h3>
<p>Email delivery is handled via JavaMail API with configurable support for SSL, STARTTLS, or plain SMTP. Here‚Äôs a simplified version:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sendEmail</span>(String smtpHost, String smtpPort, String username, String password,
</span></span><span style="display:flex;"><span>                      String subject, Config.<span style="color:#a6e22e">SslOption</span> sslOption,
</span></span><span style="display:flex;"><span>                      String recipient, String messageBody) <span style="color:#66d9ef">throws</span> MessagingException {
</span></span><span style="display:flex;"><span>    Properties props <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Properties();
</span></span><span style="display:flex;"><span>    props.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;mail.smtp.host&#34;</span>, smtpHost);
</span></span><span style="display:flex;"><span>    props.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;mail.smtp.port&#34;</span>, smtpPort);
</span></span><span style="display:flex;"><span>    props.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;mail.smtp.auth&#34;</span>, String.<span style="color:#a6e22e">valueOf</span>(password <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (sslOption <span style="color:#f92672">==</span> Config.<span style="color:#a6e22e">SslOption</span>.<span style="color:#a6e22e">SSL</span>) {
</span></span><span style="display:flex;"><span>        props.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;mail.smtp.ssl.enable&#34;</span>, <span style="color:#e6db74">&#34;true&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (sslOption <span style="color:#f92672">==</span> Config.<span style="color:#a6e22e">SslOption</span>.<span style="color:#a6e22e">START_TLS</span>) {
</span></span><span style="display:flex;"><span>        props.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;mail.smtp.starttls.enable&#34;</span>, <span style="color:#e6db74">&#34;true&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Session session <span style="color:#f92672">=</span> Session.<span style="color:#a6e22e">getInstance</span>(props);
</span></span><span style="display:flex;"><span>    MimeMessage message <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MimeMessage(session);
</span></span><span style="display:flex;"><span>    message.<span style="color:#a6e22e">setFrom</span>(<span style="color:#66d9ef">new</span> InternetAddress(username));
</span></span><span style="display:flex;"><span>    message.<span style="color:#a6e22e">addRecipient</span>(Message.<span style="color:#a6e22e">RecipientType</span>.<span style="color:#a6e22e">TO</span>, <span style="color:#66d9ef">new</span> InternetAddress(recipient));
</span></span><span style="display:flex;"><span>    message.<span style="color:#a6e22e">setSubject</span>(subject);
</span></span><span style="display:flex;"><span>    message.<span style="color:#a6e22e">setContent</span>(messageBody, <span style="color:#e6db74">&#34;text/html; charset=UTF-8&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    executorService.<span style="color:#a6e22e">execute</span>(() <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            Transport.<span style="color:#a6e22e">send</span>(message, username, password);
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (MessagingException ex) {
</span></span><span style="display:flex;"><span>            logger.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#34;Failed to send email&#34;</span>, ex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This non-blocking approach ensures authentication flows remain performant and scalable.</p>
<hr>
<h3 id="-configuration-flexibility-via-interface">üß© <strong>Configuration Flexibility via Interface</strong><a hidden class="anchor" aria-hidden="true" href="#-configuration-flexibility-via-interface">#</a></h3>
<p>The <code>Config</code> interface allows admins to customize everything from SMTP settings to email subject and templates:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Attribute</span>(order <span style="color:#f92672">=</span> 100)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">default</span> String <span style="color:#a6e22e">hostName</span>() { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;smtp.example.com&#34;</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Attribute</span>(order <span style="color:#f92672">=</span> 800)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">default</span> String <span style="color:#a6e22e">returnUrl</span>() { <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;https://www.example.com/suspendId=&#34;</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Attribute</span>(order <span style="color:#f92672">=</span> 900)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">default</span> String <span style="color:#a6e22e">emailSuspendMessage</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;An email has been sent to the address you entered. Click the link in that email to proceed.&#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This makes it easy to adapt the node for different environments or branding requirements.</p>
<hr>
<h3 id="-real-world-use-case-email-verification-without-idm">‚úÖ <strong>Real-World Use Case: Email Verification Without IDM</strong><a hidden class="anchor" aria-hidden="true" href="#-real-world-use-case-email-verification-without-idm">#</a></h3>
<p>Imagine a SaaS platform using ForgeRock AM for authentication but handling user profiles in a separate microservice. Instead of spinning up IDM just to manage <code>EmailSuspendNode</code>, this custom node can independently trigger an email verification link, thereby completing login or registration securely.</p>
<p>This aligns perfectly with microservices-based identity architectures and zero-trust principles.</p>
<hr>
<h3 id="-diagram-suspend-resume-flow">üß≠ <strong>Diagram: Suspend-Resume Flow</strong><a hidden class="anchor" aria-hidden="true" href="#-diagram-suspend-resume-flow">#</a></h3>
<pre tabindex="0"><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AM Tree     ‚îÇ
‚îÇ Starts Flow  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇCustom Suspend‚îÇ
‚îÇ   Node       ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
       ‚îÇ Email Link      ‚îÇ
       ‚ñº                 ‚îÇ
  User checks email      ‚îÇ
       ‚îÇ                 ‚îÇ
       ‚ñº                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇResume with ID‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ Continues    ‚îÇ
‚îÇ Flow         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre><hr>
<h3 id="-questions-to-consider">üí° <strong>Questions to Consider</strong><a hidden class="anchor" aria-hidden="true" href="#-questions-to-consider">#</a></h3>
<ul>
<li>How could you adapt this approach to support SMS-based suspend/resume?</li>
<li>What are the trade-offs of managing email verification purely in AM vs. integrating with IDM or an external service?</li>
<li>Can this model support progressive profiling and attribute collection over time?</li>
</ul>
<hr>
<p>By implementing a self-contained email verification node in ForgeRock AM, organizations gain agility, reduce dependencies, and tailor their authentication experience. Whether you&rsquo;re modernizing legacy apps or building zero-IDM identity platforms, this custom node can be a critical enabler.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.iamdevbox.com/tags/forgerock-am/">ForgeRock AM</a></li>
      <li><a href="https://www.iamdevbox.com/tags/custom-tree-node/">Custom Tree Node</a></li>
      <li><a href="https://www.iamdevbox.com/tags/email-verification/">Email Verification</a></li>
      <li><a href="https://www.iamdevbox.com/tags/identity-management/">Identity Management</a></li>
      <li><a href="https://www.iamdevbox.com/tags/authentication-flows/">Authentication Flows</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.iamdevbox.com/posts/extracting-and-mapping-attributes-from-ldif-for-forgerock-identity-management/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>Extracting and Mapping Attributes from LDIF for ForgeRock Identity Management</span>
  </a>
  <a class="next" href="https://www.iamdevbox.com/posts/comparing-forgerock-ping-auth0-and-keycloak-a-practical-guide/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>Comparing ForgeRock, Ping, Auth0, and Keycloak: A Practical Guide</span>
  </a>
</nav>

  </footer>

  
  

  
  <section class="post-related-articles custom-section">
    <h2 class="custom-section-title">
      Related Articles
    </h2>
    
    
    <ul class="custom-list">
      
      
        
          <li class="custom-list-item">
            <a href="/posts/navigating-iam-challenges-in-multi-cloud-environments/" class="custom-link">
              Navigating IAM Challenges in Multi-Cloud Environments
            </a>
            <small class="custom-date">2025-06-06</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/decentralized-identity-and-oauth-can-they-work-together/" class="custom-link">
              Decentralized Identity and OAuth: Can They Work Together?
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/forgerock-am-script-customization-a-practical-guide/" class="custom-link">
              ForgeRock AM Script Customization: A Practical Guide
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/forgerock-vs-keycloak-choosing-the-right-iam-solution-for-your-organization/" class="custom-link">
              ForgeRock vs Keycloak: Choosing the Right IAM Solution for Your Organization
            </a>
            <small class="custom-date">2025-05-28</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/the-evolution-of-multi-tenant-identity-management-systems-architecture/" class="custom-link">
              The Evolution of Multi-Tenant Identity Management Systems Architecture
            </a>
            <small class="custom-date">2025-05-28</small>
          </li>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      

      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
  

  <section class="post-recent-articles custom-section-alt">
    <h2 class="custom-section-title">
      Latest Articles
    </h2>
    
    
    
    <ul class="custom-list">
      
      
        
          
            <li class="custom-list-item">
              <a href="/posts/devops-is-not-just-tools--its-a-cultural-transformation/" class="custom-link">
                DevOps Is Not Just Tools ‚Äî It‚Äôs a Cultural Transformation
              </a>
              <small class="custom-date">2025-06-09</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/orchestrating-kubernetes-and-iam-with-terraform-a-comprehensive-guide/" class="custom-link">
                Orchestrating Kubernetes and IAM with Terraform: A Comprehensive Guide
              </a>
              <small class="custom-date">2025-06-08</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/navigating-iam-challenges-in-multi-cloud-environments/" class="custom-link">
                Navigating IAM Challenges in Multi-Cloud Environments
              </a>
              <small class="custom-date">2025-06-06</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/best-practices-for-writing-java-dockerfiles/" class="custom-link">
                Best Practices for Writing Java Dockerfiles
              </a>
              <small class="custom-date">2025-06-05</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/building-unified-identity-strategy-in-multi-cloud-environments/" class="custom-link">
                Building Unified Identity Strategy in Multi-Cloud Environments
              </a>
              <small class="custom-date">2025-06-04</small>
            </li>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
</article>
    </main>
    
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.iamdevbox.com/">IAMDevBox</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        window.requestAnimationFrame(() => {
            const savedScroll = localStorage.getItem("menu-scroll-position");
            if (savedScroll !== null) {
            menu.scrollLeft = savedScroll;
            }
        });

        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
