<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Why IAM Is Essential for Microservices Security | IAMDevBox</title><meta name="description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems."><meta name="keywords" content="microservices, IAM, security, architecture, cloud"><meta name="author" content="IAMDevBox"><meta name="language" content="en-US">
<meta property="og:locale" content="en_US"><link rel="canonical" href="https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/"><meta property="og:title" content="Why IAM Is Essential for Microservices Security | IAMDevBox">
<meta property="og:description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/">
<meta property="og:site_name" content="IAMDevBox">
<meta property="og:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="IAMDevBox - Identity and Access Management Blog"><meta property="article:published_time" content="2025-06-24T14:53:37Z">
<meta property="article:modified_time" content="2025-06-26T12:00:30-04:00">
<meta property="article:author" content="IAMDevBox">
<meta property="article:section" content="Posts"><meta property="article:tag" content="microservices"><meta property="article:tag" content="IAM"><meta property="article:tag" content="security"><meta property="article:tag" content="architecture"><meta property="article:tag" content="cloud"><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Why IAM Is Essential for Microservices Security | IAMDevBox">
<meta name="twitter:description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.">
<meta name="twitter:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg"><meta name="twitter:site" content="@iamdevbox"><meta name="twitter:creator" content="@iamdevbox"><meta name="format-detection" content="telephone=no">
<meta name="theme-color" content="#2e2e33"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="//www.google-analytics.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com"><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Why IAM Is Essential for Microservices Security",
  "description": "Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.",
  "image": "https:\/\/www.iamdevbox.com\/IAMDevBox.com.jpg",
  "author": {
    "@type": "Person",
    "name": "IAMDevBox"
  },
  "publisher": {
    "@type": "Organization",
    "name": "IAMDevBox",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.iamdevbox.com\/IAMDevBox.com.png"
    }
  },
  "datePublished": "2025-06-24T14:53:37Z",
  "dateModified": "2025-06-26T12:00:30-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/www.iamdevbox.com\/posts\/why-iam-is-essential-for-microservices-security\/"
  },
  "wordCount":  793 ,
  "keywords": "[\"microservices\",\"IAM\",\"security\",\"architecture\",\"cloud\"]"
}
</script><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Home",
      "item": "https:\/\/www.iamdevbox.com\/"
    },
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blog",
      "item": "https:\/\/www.iamdevbox.com\/posts\/"
    },
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Why IAM Is Essential for Microservices Security",
      "item": "https:\/\/www.iamdevbox.com\/posts\/why-iam-is-essential-for-microservices-security\/"
    }]
}
</script>
<link crossorigin="anonymous" href="/assets/css/stylesheet.93f625d739f1d6a5c6f20c146bc6a8d26b233492b34b2220c54b12fd46a04ded.css" integrity="sha256-k/Yl1znx1qXG8gwUa8ao0msjNJKzSyIgxUsS/UagTe0=" rel="preload stylesheet" as="style">


<link rel="icon" href="https://www.iamdevbox.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.iamdevbox.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.iamdevbox.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.iamdevbox.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.iamdevbox.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css" media="print" onload="this.media='all'">
<noscript><link rel="stylesheet" href="/css/custom.min.f87e4df74f4f070695effe5d49ae4914eb9228356e4300800036f51859f72d47.css"></noscript>

<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<meta property="og:url" content="https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/">
  <meta property="og:site_name" content="IAMDevBox">
  <meta property="og:title" content="Why IAM Is Essential for Microservices Security">
  <meta property="og:description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-24T14:53:37+00:00">
    <meta property="article:modified_time" content="2025-06-26T12:00:30-04:00">
    <meta property="article:tag" content="Microservices">
    <meta property="article:tag" content="IAM">
    <meta property="article:tag" content="Security">
    <meta property="article:tag" content="Architecture">
    <meta property="article:tag" content="Cloud">
      <meta property="og:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.iamdevbox.com/IAMDevBox.com.jpg">
<meta name="twitter:title" content="Why IAM Is Essential for Microservices Security">
<meta name="twitter:description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "All posts",
      "item": "https://www.iamdevbox.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Why IAM Is Essential for Microservices Security",
      "item": "https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Why IAM Is Essential for Microservices Security",
  "name": "Why IAM Is Essential for Microservices Security",
  "description": "Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.",
  "keywords": [
    "microservices", "IAM", "security", "architecture", "cloud"
  ],
  "articleBody": "Why Identity and Access Management (IAM) is Essential for Microservices Security Introduction In the dynamic landscape of modern software development, microservices architecture has emerged as a cornerstone for building scalable, resilient, and maintainable applications. However, as the number of services grows, so does the complexity of managing access and ensuring security. This is where Identity and Access Management (IAM) plays a pivotal role. IAM is not just an add-on; it‚Äôs a fundamental pillar of microservices architecture, ensuring that only authorized entities can interact with your services.\nThe Evolution of Microservices Microservices architecture breaks down an application into smaller, independent services that can be developed, deployed, and scaled individually. While this approach offers numerous benefits, it also introduces challenges, particularly in managing security across distributed services.\nFrom Monolithic to Microservices In monolithic architectures, security was often managed at the application level, with a single perimeter to defend. However, microservices operate in a distributed environment where each service can be exposed to the internet, making traditional security approaches inadequate.\nThe Need for Granular Control Each microservice may have different security requirements. For instance, a service handling user authentication might require stronger encryption than a service generating invoices. IAM allows you to apply granular security policies tailored to the specific needs of each service.\nThe Role of IAM in Microservices IAM in microservices encompasses authentication, authorization, and Federation, ensuring that services and users are who they claim to be and have only the necessary access rights.\nAuthentication Authentication verifies the identity of users or services. In microservices, this is often achieved through tokens, such as JSON Web Tokens (JWT).\nJWT Example { \"sub\": \"1234567890\", \"name\": \"John Doe\", \"iat\": 1516239022, \"exp\": 1516239042 } This token contains claims about the user, such as their ID and name, and is securely signed to prevent tampering.\nAuthorization Authorization determines what actions a user or service is permitted to perform. This is often managed through policies, such as Role-Based Access Control (RBAC).\nRBAC Example policies: - name: \"read-only\" bind: \"role:reader\" effect: \"allow\" resources: [\"*/read\"] This policy allows users with the ‚Äúreader‚Äù role to perform read operations on all resources.\nFederation Federation enables users to access multiple services with a single set of credentials. This is often achieved through protocols like OAuth2.\nOAuth2 Flow Authorization Request: The client directs the user to the authorization server. Authorization Grant: The user grants permission, and the server issues an authorization code. Token Request: The client exchanges the authorization code for an access token. Resource Access: The client uses the access token to access the resource server. This flow ensures that users can seamlessly access multiple services without repeatedly entering their credentials.\nImplementing IAM in Microservices Implementing IAM in microservices requires careful planning and the right tools.\nService-to-Service Communication Services often need to communicate with each other, and IAM ensures that these interactions are secure.\nService Authentication with JWT @RestController public class MyController { @GetMapping(\"/api/data\") public ResponseEntity getData(@RequestHeader(\"Authorization\") String token) { // Validate JWT token if (token == null || !token.startsWith(\"Bearer \")) { return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build(); } String jwt = token.substring(7); try { // Parse and validate JWT Claims claims = Jwts.parser().setSigningKey(key).parseClaimsJws(jwt).getBody(); // Extract user roles and permissions String roles = (String) claims.get(\"roles\"); // Check if user has permission to access this endpoint if (!roles.contains(\"admin\")) { return ResponseEntity.status(HttpStatus.FORBIDDEN).build(); } } catch (Exception e) { return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build(); } // Return data return ResponseEntity.ok(\"Secure data\"); } } This code snippet demonstrates how a service can validate a JWT token to authenticate and authorize incoming requests.\nAPI Gateways API gateways act as a central entry point for your microservices, handling tasks like routing, load balancing, and security.\nAPI Gateway with OAuth2 services: - name: \"api-gateway\" ports: - 8080 properties: oauth2: client-id: \"my-client-id\" client-secret: \"my-client-secret\" token-uri: \"https://auth-server/oauth2/token\" This configuration sets up an API gateway to handle OAuth2 authentication, ensuring that all incoming requests are properly authenticated before being routed to the appropriate service.\nBest Practices for IAM in Microservices To maximize the effectiveness of IAM in your microservices architecture, follow these best practices:\nUse Short-Lived Tokens Tokens with short expiration times reduce the risk of token theft.\nImplement Token Rotation Regularly rotate tokens to ensure that even if a token is compromised, it will only be valid for a short period.\nLeverage Built-in IAM Solutions Many cloud providers offer IAM solutions that are pre-integrated with their services, simplifying implementation.\nUse HTTPS Everywhere Ensure that all communication between services is encrypted using HTTPS to protect against eavesdropping.\nConclusion IAM is not just a security measure; it‚Äôs a critical enabler of microservices architecture. By providing robust authentication, authorization, and Federation mechanisms, IAM ensures that your microservices are secure, scalable, and maintainable. As you design and implement your microservices, make sure that IAM is not an afterthought but a core consideration from the outset.\n",
  "wordCount" : "793",
  "inLanguage": "en",
  "image": "https://www.iamdevbox.com/IAMDevBox.com.jpg","datePublished": "2025-06-24T14:53:37Z",
  "dateModified": "2025-06-26T12:00:30-04:00",
  "author":{
    "@type": "Person",
    "name": "IAMDevBox"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.iamdevbox.com/posts/why-iam-is-essential-for-microservices-security/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "IAMDevBox",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.iamdevbox.com/favicon.ico"
    }
  }
}
</script><meta name="description" content="Discover the critical role of Identity and Access Management (IAM) in securing microservices architectures, ensuring scalability, and maintaining robust security in distributed systems.">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/is-jwt-decoding-safe-on-the-frontend-security-risks-you-should-know\/"
            },
            "headline": "\"Is JWT Decoding Safe on the Frontend? Security Risks You Should Know\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-08-28T14:53:37Z",
            "dateModified": "2025-08-28T14:53:52Z"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/what-is-a-jwt-and-how-does-it-work-a-developer-friendly-introduction\/"
            },
            "headline": "\"What Is a JWT and How Does It Work? A Developer-Friendly Introduction\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-08-26T15:13:56Z",
            "dateModified": "2025-08-26T15:14:09Z"
          },
          {
            "@type": "Article",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https:\/\/www.iamdevbox.com\/posts\/build-your-own-jwt-decode-online-tool-with-firebase-functions-and-react\/"
            },
            "headline": "\"Build Your Own JWT Decode Online Tool with Firebase Functions and React\"",
            "author": {
              "@type": "Person",
              "name": "IAMDevBox"
            },
            "publisher": {
              "@type": "Organization",
              "name": "IAMDevBox",
              "logo": {
                "@type": "ImageObject",
                "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
              }
            },
            "image": {
              "@type": "ImageObject",
              "url": "\"https://www.iamdevbox.com/favicon-96x96.png\""
            },
            "datePublished": "2025-08-25T19:38:05Z",
            "dateModified": "2025-08-25T19:38:19Z"
          }
  ]
}
</script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "\"Why is IAM crucial in microservices architecture?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"What are best practices for implementing IAM in microservices?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    },
    {
      "@type": "Question",
      "name": "\"Can IAM be bypassed in microservices for simplicity?\"",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "\"Please refer to the article for detailed explanation.\""
      }
    }
  ]
}
</script>
    
    <script>
    document.addEventListener("DOMContentLoaded", () => {
    if (document.querySelector('.mermaid')) {
        const script = document.createElement('script');
        script.src = "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js";
        script.onload = () => {
        mermaid.initialize({ startOnLoad: true, theme: "default" });
        };
        document.head.appendChild(script);
    }
    });
    </script>

    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6QCH29975"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-B6QCH29975');
    </script>
    
    
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.iamdevbox.com/" accesskey="h" title="IAMDevBox (Alt + H)">IAMDevBox</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.iamdevbox.com/posts/" title="Read articles and updates">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/tools/" title="Explore developer tools">
                    <span>üß∞Tools</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamdevbox.com/search/" title="Search this site">
                    <span>üîç</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.iamdevbox.com/">Home</a>&nbsp;¬ª&nbsp;<a href="https://www.iamdevbox.com/posts/">All posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Why IAM Is Essential for Microservices Security
    </h1>
    
    <div class="post-meta">4 min&nbsp;¬∑&nbsp;793 words&nbsp;¬∑&nbsp;IAMDevBox

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#why-identity-and-access-management-iam-is-essential-for-microservices-security" aria-label="Why Identity and Access Management (IAM) is Essential for Microservices Security">Why Identity and Access Management (IAM) is Essential for Microservices Security</a><ul>
                        
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#the-evolution-of-microservices" aria-label="The Evolution of Microservices">The Evolution of Microservices</a><ul>
                        
                <li>
                    <a href="#from-monolithic-to-microservices" aria-label="From Monolithic to Microservices">From Monolithic to Microservices</a></li>
                <li>
                    <a href="#the-need-for-granular-control" aria-label="The Need for Granular Control">The Need for Granular Control</a></li></ul>
                </li>
                <li>
                    <a href="#the-role-of-iam-in-microservices" aria-label="The Role of IAM in Microservices">The Role of IAM in Microservices</a><ul>
                        
                <li>
                    <a href="#authentication" aria-label="Authentication">Authentication</a><ul>
                        
                <li>
                    <a href="#jwt-example" aria-label="JWT Example">JWT Example</a></li></ul>
                </li>
                <li>
                    <a href="#authorization" aria-label="Authorization">Authorization</a><ul>
                        
                <li>
                    <a href="#rbac-example" aria-label="RBAC Example">RBAC Example</a></li></ul>
                </li>
                <li>
                    <a href="#federation" aria-label="Federation">Federation</a><ul>
                        
                <li>
                    <a href="#oauth2-flow" aria-label="OAuth2 Flow">OAuth2 Flow</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#implementing-iam-in-microservices" aria-label="Implementing IAM in Microservices">Implementing IAM in Microservices</a><ul>
                        
                <li>
                    <a href="#service-to-service-communication" aria-label="Service-to-Service Communication">Service-to-Service Communication</a><ul>
                        
                <li>
                    <a href="#service-authentication-with-jwt" aria-label="Service Authentication with JWT">Service Authentication with JWT</a></li></ul>
                </li>
                <li>
                    <a href="#api-gateways" aria-label="API Gateways">API Gateways</a><ul>
                        
                <li>
                    <a href="#api-gateway-with-oauth2" aria-label="API Gateway with OAuth2">API Gateway with OAuth2</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#best-practices-for-iam-in-microservices" aria-label="Best Practices for IAM in Microservices">Best Practices for IAM in Microservices</a><ul>
                        
                <li>
                    <a href="#use-short-lived-tokens" aria-label="Use Short-Lived Tokens">Use Short-Lived Tokens</a></li>
                <li>
                    <a href="#implement-token-rotation" aria-label="Implement Token Rotation">Implement Token Rotation</a></li>
                <li>
                    <a href="#leverage-built-in-iam-solutions" aria-label="Leverage Built-in IAM Solutions">Leverage Built-in IAM Solutions</a></li>
                <li>
                    <a href="#use-https-everywhere" aria-label="Use HTTPS Everywhere">Use HTTPS Everywhere</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="why-identity-and-access-management-iam-is-essential-for-microservices-security">Why Identity and Access Management (IAM) is Essential for Microservices Security<a hidden class="anchor" aria-hidden="true" href="#why-identity-and-access-management-iam-is-essential-for-microservices-security">#</a></h1>
<h2 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h2>
<p>In the dynamic landscape of modern software development, microservices architecture has emerged as a cornerstone for building scalable, resilient, and maintainable applications. However, as the number of services grows, so does the complexity of managing access and ensuring security. This is where Identity and Access Management (IAM) plays a pivotal role. IAM is not just an add-on; it&rsquo;s a fundamental pillar of microservices architecture, ensuring that only authorized entities can interact with your services.</p>
<h2 id="the-evolution-of-microservices">The Evolution of Microservices<a hidden class="anchor" aria-hidden="true" href="#the-evolution-of-microservices">#</a></h2>
<p>Microservices architecture breaks down an application into smaller, independent services that can be developed, deployed, and scaled individually. While this approach offers numerous benefits, it also introduces challenges, particularly in managing security across distributed services.</p>
<h3 id="from-monolithic-to-microservices">From Monolithic to Microservices<a hidden class="anchor" aria-hidden="true" href="#from-monolithic-to-microservices">#</a></h3>
<p>In monolithic architectures, security was often managed at the application level, with a single perimeter to defend. However, microservices operate in a distributed environment where each service can be exposed to the internet, making traditional security approaches inadequate.</p>
<h3 id="the-need-for-granular-control">The Need for Granular Control<a hidden class="anchor" aria-hidden="true" href="#the-need-for-granular-control">#</a></h3>
<p>Each microservice may have different security requirements. For instance, a service handling user authentication might require stronger encryption than a service generating invoices. IAM allows you to apply granular security policies tailored to the specific needs of each service.</p>
<h2 id="the-role-of-iam-in-microservices">The Role of IAM in Microservices<a hidden class="anchor" aria-hidden="true" href="#the-role-of-iam-in-microservices">#</a></h2>
<p>IAM in microservices encompasses authentication, authorization, and Federation, ensuring that services and users are who they claim to be and have only the necessary access rights.</p>
<h3 id="authentication">Authentication<a hidden class="anchor" aria-hidden="true" href="#authentication">#</a></h3>
<p>Authentication verifies the identity of users or services. In microservices, this is often achieved through tokens, such as JSON Web Tokens (JWT).</p>
<h4 id="jwt-example">JWT Example<a hidden class="anchor" aria-hidden="true" href="#jwt-example">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;sub&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;1234567890&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John Doe&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;iat&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1516239022</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;exp&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1516239042</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This token contains claims about the user, such as their ID and name, and is securely signed to prevent tampering.</p>
<h3 id="authorization">Authorization<a hidden class="anchor" aria-hidden="true" href="#authorization">#</a></h3>
<p>Authorization determines what actions a user or service is permitted to perform. This is often managed through policies, such as Role-Based Access Control (RBAC).</p>
<h4 id="rbac-example">RBAC Example<a hidden class="anchor" aria-hidden="true" href="#rbac-example">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">policies</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;read-only&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">bind</span>: <span style="color:#e6db74">&#34;role:reader&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">effect</span>: <span style="color:#e6db74">&#34;allow&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">resources</span>: [<span style="color:#e6db74">&#34;*/read&#34;</span>]
</span></span></code></pre></div><p>This policy allows users with the &ldquo;reader&rdquo; role to perform read operations on all resources.</p>
<h3 id="federation">Federation<a hidden class="anchor" aria-hidden="true" href="#federation">#</a></h3>
<p>Federation enables users to access multiple services with a single set of credentials. This is often achieved through protocols like OAuth2.</p>
<h4 id="oauth2-flow">OAuth2 Flow<a hidden class="anchor" aria-hidden="true" href="#oauth2-flow">#</a></h4>
<ol>
<li><strong>Authorization Request</strong>: The client directs the user to the authorization server.</li>
<li><strong>Authorization Grant</strong>: The user grants permission, and the server issues an authorization code.</li>
<li><strong>Token Request</strong>: The client exchanges the authorization code for an access token.</li>
<li><strong>Resource Access</strong>: The client uses the access token to access the resource server.</li>
</ol>
<p>This flow ensures that users can seamlessly access multiple services without repeatedly entering their credentials.</p>
<h2 id="implementing-iam-in-microservices">Implementing IAM in Microservices<a hidden class="anchor" aria-hidden="true" href="#implementing-iam-in-microservices">#</a></h2>
<p>Implementing IAM in microservices requires careful planning and the right tools.</p>
<h3 id="service-to-service-communication">Service-to-Service Communication<a hidden class="anchor" aria-hidden="true" href="#service-to-service-communication">#</a></h3>
<p>Services often need to communicate with each other, and IAM ensures that these interactions are secure.</p>
<h4 id="service-authentication-with-jwt">Service Authentication with JWT<a hidden class="anchor" aria-hidden="true" href="#service-authentication-with-jwt">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyController</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@GetMapping</span>(<span style="color:#e6db74">&#34;/api/data&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ResponseEntity <span style="color:#a6e22e">getData</span>(<span style="color:#a6e22e">@RequestHeader</span>(<span style="color:#e6db74">&#34;Authorization&#34;</span>) String token) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Validate JWT token</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (token <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>token.<span style="color:#a6e22e">startsWith</span>(<span style="color:#e6db74">&#34;Bearer &#34;</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> ResponseEntity.<span style="color:#a6e22e">status</span>(HttpStatus.<span style="color:#a6e22e">UNAUTHORIZED</span>).<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        String jwt <span style="color:#f92672">=</span> token.<span style="color:#a6e22e">substring</span>(7);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Parse and validate JWT</span>
</span></span><span style="display:flex;"><span>            Claims claims <span style="color:#f92672">=</span> Jwts.<span style="color:#a6e22e">parser</span>().<span style="color:#a6e22e">setSigningKey</span>(key).<span style="color:#a6e22e">parseClaimsJws</span>(jwt).<span style="color:#a6e22e">getBody</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Extract user roles and permissions</span>
</span></span><span style="display:flex;"><span>            String roles <span style="color:#f92672">=</span> (String) claims.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;roles&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Check if user has permission to access this endpoint</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>roles.<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;admin&#34;</span>)) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> ResponseEntity.<span style="color:#a6e22e">status</span>(HttpStatus.<span style="color:#a6e22e">FORBIDDEN</span>).<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">catch</span> (Exception e) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> ResponseEntity.<span style="color:#a6e22e">status</span>(HttpStatus.<span style="color:#a6e22e">UNAUTHORIZED</span>).<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Return data</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ResponseEntity.<span style="color:#a6e22e">ok</span>(<span style="color:#e6db74">&#34;Secure data&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This code snippet demonstrates how a service can validate a JWT token to authenticate and authorize incoming requests.</p>
<h3 id="api-gateways">API Gateways<a hidden class="anchor" aria-hidden="true" href="#api-gateways">#</a></h3>
<p>API gateways act as a central entry point for your microservices, handling tasks like routing, load balancing, and security.</p>
<h4 id="api-gateway-with-oauth2">API Gateway with OAuth2<a hidden class="anchor" aria-hidden="true" href="#api-gateway-with-oauth2">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#e6db74">&#34;api-gateway&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">properties</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">oauth2</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">client-id</span>: <span style="color:#e6db74">&#34;my-client-id&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">client-secret</span>: <span style="color:#e6db74">&#34;my-client-secret&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">token-uri</span>: <span style="color:#e6db74">&#34;https://auth-server/oauth2/token&#34;</span>
</span></span></code></pre></div><p>This configuration sets up an API gateway to handle OAuth2 authentication, ensuring that all incoming requests are properly authenticated before being routed to the appropriate service.</p>
<h2 id="best-practices-for-iam-in-microservices">Best Practices for IAM in Microservices<a hidden class="anchor" aria-hidden="true" href="#best-practices-for-iam-in-microservices">#</a></h2>
<p>To maximize the effectiveness of IAM in your microservices architecture, follow these best practices:</p>
<h3 id="use-short-lived-tokens">Use Short-Lived Tokens<a hidden class="anchor" aria-hidden="true" href="#use-short-lived-tokens">#</a></h3>
<p>Tokens with short expiration times reduce the risk of token theft.</p>
<h3 id="implement-token-rotation">Implement Token Rotation<a hidden class="anchor" aria-hidden="true" href="#implement-token-rotation">#</a></h3>
<p>Regularly rotate tokens to ensure that even if a token is compromised, it will only be valid for a short period.</p>
<h3 id="leverage-built-in-iam-solutions">Leverage Built-in IAM Solutions<a hidden class="anchor" aria-hidden="true" href="#leverage-built-in-iam-solutions">#</a></h3>
<p>Many cloud providers offer IAM solutions that are pre-integrated with their services, simplifying implementation.</p>
<h3 id="use-https-everywhere">Use HTTPS Everywhere<a hidden class="anchor" aria-hidden="true" href="#use-https-everywhere">#</a></h3>
<p>Ensure that all communication between services is encrypted using HTTPS to protect against eavesdropping.</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>IAM is not just a security measure; it&rsquo;s a critical enabler of microservices architecture. By providing robust authentication, authorization, and Federation mechanisms, IAM ensures that your microservices are secure, scalable, and maintainable. As you design and implement your microservices, make sure that IAM is not an afterthought but a core consideration from the outset.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.iamdevbox.com/tags/microservices/">Microservices</a></li>
      <li><a href="https://www.iamdevbox.com/tags/iam/">IAM</a></li>
      <li><a href="https://www.iamdevbox.com/tags/security/">Security</a></li>
      <li><a href="https://www.iamdevbox.com/tags/architecture/">Architecture</a></li>
      <li><a href="https://www.iamdevbox.com/tags/cloud/">Cloud</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.iamdevbox.com/posts/managing-custom-resources-with-kubernetes-operators/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>Managing Custom Resources with Kubernetes Operators</span>
  </a>
  <a class="next" href="https://www.iamdevbox.com/posts/jwt-decoding-and-validation-how-to-securely-parse-and-verify-your-tokens/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>JWT Decoding and Validation: How to Securely Parse and Verify Your Tokens</span>
  </a>
</nav>

  </footer>

  
  

  
  <section class="post-related-articles custom-section">
    <h2 class="custom-section-title">
      Related Articles
    </h2>
    
    
    <ul class="custom-list">
      
      
        
          <li class="custom-list-item">
            <a href="/posts/decoding-jwts-in-python-three-practical-methods-with-code-examples/" class="custom-link">
              Decoding JWTs in Python: Three Practical Methods with Code Examples
            </a>
            <small class="custom-date">2025-07-29</small>
          </li>
          
        
      
        
      
        
          <li class="custom-list-item">
            <a href="/posts/orchestrating-kubernetes-and-iam-with-terraform-a-comprehensive-guide/" class="custom-link">
              Orchestrating Kubernetes and IAM with Terraform: A Comprehensive Guide
            </a>
            <small class="custom-date">2025-06-08</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/navigating-iam-challenges-in-multi-cloud-environments/" class="custom-link">
              Navigating IAM Challenges in Multi-Cloud Environments
            </a>
            <small class="custom-date">2025-06-06</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/how-we-solved-token-misrouting-in-forgerock-identity-cloud/" class="custom-link">
              How We Solved Token Misrouting in ForgeRock Identity Cloud
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
          <li class="custom-list-item">
            <a href="/posts/enterprise-iam-architecture/" class="custom-link">
              Enterprise IAM Architecture Cluster
            </a>
            <small class="custom-date">2025-06-04</small>
          </li>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      

      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
  

  <section class="post-recent-articles custom-section-alt">
    <h2 class="custom-section-title">
      Latest Articles
    </h2>
    
    
    
    <ul class="custom-list">
      
      
        
          
            <li class="custom-list-item">
              <a href="/posts/is-jwt-decoding-safe-on-the-frontend-security-risks-you-should-know/" class="custom-link">
                Is JWT Decoding Safe on the Frontend? Security Risks You Should Know
              </a>
              <small class="custom-date">2025-08-28</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/what-is-a-jwt-and-how-does-it-work-a-developer-friendly-introduction/" class="custom-link">
                What Is a JWT and How Does It Work? A Developer-Friendly Introduction
              </a>
              <small class="custom-date">2025-08-26</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/build-your-own-jwt-decode-online-tool-with-firebase-functions-and-react/" class="custom-link">
                Build Your Own JWT Decode Online Tool with Firebase Functions and React
              </a>
              <small class="custom-date">2025-08-25</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/comparing-the-top-jwt-decode-tools-online-services-vs-local-libraries/" class="custom-link">
                Comparing the Top JWT Decode Tools: Online Services vs Local Libraries
              </a>
              <small class="custom-date">2025-08-14</small>
            </li>
            
          
        
      
        
          
            <li class="custom-list-item">
              <a href="/posts/how-online-jwt-decode-tools-work-build-one-yourself-step-by-step/" class="custom-link">
                How Online JWT Decode Tools Work: Build One Yourself Step-by-Step
              </a>
              <small class="custom-date">2025-08-07</small>
            </li>
            
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </ul>

    
      <div class="custom-more">
        <a href="/posts/" class="custom-link">
          More &raquo;
        </a>
      </div>
    
  </section>
</article>
    </main>
    
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.iamdevbox.com/">IAMDevBox</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        window.requestAnimationFrame(() => {
            const savedScroll = localStorage.getItem("menu-scroll-position");
            if (savedScroll !== null) {
            menu.scrollLeft = savedScroll;
            }
        });

        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
